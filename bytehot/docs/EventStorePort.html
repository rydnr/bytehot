<!DOCTYPE html>
<html>
<head>
    <title>EventStorePort - ByteHot Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="navigation">
    <a href="../index.html">üè† Home</a>
    <a href="../implementation.html">üèóÔ∏è Implementation</a>
    <a href="../journal.html">üìî Journal</a>
    <a href="../docs/">üìö Docs</a>
    <a href="../javadocs/">üìñ Javadocs</a>
    <a href="https://github.com/rydnr/bytehot">üîó GitHub</a>
</div>
<main>
<h1 id="overview">Overview</h1>
<p>The <code>EventStorePort</code> interface serves as ByteHot's
sophisticated event sourcing persistence abstraction, defining a
comprehensive contract for storing, retrieving, and managing versioned
domain events across the entire system lifecycle. This critical
secondary port abstracts event storage implementation details from
domain logic, enabling flexible storage strategies while maintaining
complete audit trails, temporal analysis capabilities, and aggregate
reconstruction functionality. As the cornerstone of ByteHot's event
sourcing architecture, it provides the foundation for system resilience,
debugging capabilities, and comprehensive state management through
immutable event streams.</p>
<h1 id="domain-architecture-role">Domain Architecture Role</h1>
<h2 id="secondary-port-for-event-persistence">Secondary Port for Event
Persistence</h2>
<p>EventStorePort serves as a fundamental secondary port in ByteHot's
hexagonal architecture:</p>
<ul>
<li>Abstracts event storage implementation details from domain logic and
business rules</li>
<li>Enables multiple storage strategies including filesystem, database,
and distributed systems</li>
<li>Provides clean separation between event sourcing concerns and
storage technology</li>
<li>Acts as the domain's window into persistent event storage
capabilities</li>
</ul>
<h2 id="event-sourcing-foundation">Event Sourcing Foundation</h2>
<p>The port provides comprehensive event sourcing foundation:</p>
<ul>
<li>Maintains complete audit trails of all domain events for system
state reconstruction</li>
<li>Supports aggregate versioning and optimistic concurrency control
mechanisms</li>
<li>Enables temporal analysis and point-in-time state reconstruction
capabilities</li>
<li>Provides comprehensive event querying and filtering for advanced
analytics</li>
</ul>
<h2 id="system-resilience-and-recovery">System Resilience and
Recovery</h2>
<p>The implementation supports sophisticated resilience and
recovery:</p>
<ul>
<li>Enables complete system state reconstruction from event history</li>
<li>Supports event replay for debugging and system recovery
scenarios</li>
<li>Provides health monitoring and accessibility verification for
operational confidence</li>
<li>Enables distributed event sourcing patterns for scalability and
fault tolerance</li>
</ul>
<h1 id="core-event-persistence-operations">Core Event Persistence
Operations</h1>
<h2 id="primary-event-storage-interface">Primary Event Storage
Interface</h2>
<div class="sourceCode" id="cb1"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventStorePort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Persists a domain event to the event store with complete metadata preservation</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This is the primary entry point for event persistence in the event sourcing system</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">event</span><span class="co"> </span>the versioned domain event to save with complete event sourcing metadata</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if the event cannot be saved due to storage issues or constraints</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">save</span><span class="op">(</span><span class="dt">final</span> VersionedDomainEvent event<span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span></code></pre></div>
<h2 id="aggregate-centric-event-retrieval">Aggregate-Centric Event
Retrieval</h2>
<div class="sourceCode" id="cb2"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventStorePort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Retrieves all events for a specific aggregate in chronological order</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables complete aggregate state reconstruction from event history</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">aggregateType</span><span class="co"> </span>the type of aggregate <span class="co">(</span>e<span class="co">.</span>g<span class="co">.,</span> <span class="co">&quot;</span>user<span class="co">&quot;,</span> <span class="co">&quot;</span>hotswap<span class="co">&quot;,</span> <span class="co">&quot;</span>filewatch<span class="co">&quot;)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">aggregateId</span><span class="co"> </span>the unique identifier of the aggregate instance</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> list of events ordered by version <span class="co">(</span>oldest first<span class="co">)</span> for complete state reconstruction</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if events cannot be retrieved due to storage or access issues</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> <span class="fu">getEventsForAggregate</span><span class="op">(</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> aggregateType<span class="op">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> aggregateId</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Retrieves events for an aggregate since a specific version for incremental updates</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables efficient aggregate state updates without full reconstruction</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">aggregateType</span><span class="co"> </span>the type of aggregate</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">aggregateId</span><span class="co"> </span>the unique identifier of the aggregate instance</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">sinceVersion</span><span class="co"> </span>retrieve events after this version <span class="co">(</span>exclusive<span class="co">)</span> for incremental processing</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> list of events ordered by version <span class="co">(</span>oldest first<span class="co">)</span> for incremental state updates</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if events cannot be retrieved due to storage or access issues</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> <span class="fu">getEventsForAggregateSince</span><span class="op">(</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> aggregateType<span class="op">,</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> aggregateId<span class="op">,</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="dt">long</span> sinceVersion</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span></code></pre></div>
<h2 id="advanced-event-querying-and-analysis">Advanced Event Querying
and Analysis</h2>
<div class="sourceCode" id="cb3"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventStorePort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Retrieves all events of a specific type across all aggregates for pattern analysis</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables cross<span class="co">-</span>aggregate analysis and system<span class="co">-</span>wide event pattern recognition</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">eventType</span><span class="co"> </span>the simple class name of the event <span class="co">(</span>e<span class="co">.</span>g<span class="co">.,</span> <span class="co">&quot;</span>ClassFileChanged<span class="co">&quot;)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> list of events ordered by timestamp <span class="co">(</span>oldest first<span class="co">)</span> for temporal analysis</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if events cannot be retrieved due to storage or access issues</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> <span class="fu">getEventsByType</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> eventType<span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Retrieves events within a time range across all aggregates for temporal analysis</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables sophisticated temporal analysis and time<span class="co">-</span>based system behavior investigation</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">startTime</span><span class="co"> </span>start of the time range <span class="co">(</span>inclusive<span class="co">)</span> for temporal boundary definition</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">endTime</span><span class="co"> </span>end of the time range <span class="co">(</span>inclusive<span class="co">)</span> for temporal boundary definition</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> list of events ordered by timestamp <span class="co">(</span>oldest first<span class="co">)</span> for chronological analysis</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if events cannot be retrieved due to storage or access issues</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> <span class="fu">getEventsBetween</span><span class="op">(</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> Instant startTime<span class="op">,</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> Instant endTime</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span></code></pre></div>
<h1 id="aggregate-management-and-versioning">Aggregate Management and
Versioning</h1>
<h2 id="version-control-and-concurrency-management">Version Control and
Concurrency Management</h2>
<div class="sourceCode" id="cb4"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventStorePort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the current version for an aggregate for optimistic concurrency control</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables proper versioning and prevents concurrent modification conflicts</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">aggregateType</span><span class="co"> </span>the type of aggregate</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">aggregateId</span><span class="co"> </span>the unique identifier of the aggregate instance</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> the current version number <span class="co">(0</span> if no events exist<span class="co">)</span> for concurrency control</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if version cannot be retrieved due to storage issues</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="fu">getCurrentVersion</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> aggregateType<span class="op">,</span> <span class="dt">final</span> <span class="bu">String</span> aggregateId<span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the number of events for a specific aggregate for analytics and optimization</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This provides insights into aggregate complexity and event volume patterns</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">aggregateType</span><span class="co"> </span>the type of aggregate</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">aggregateId</span><span class="co"> </span>the unique identifier of the aggregate instance</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> the count of events for this aggregate for volume analysis</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if count cannot be retrieved due to storage issues</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="fu">getEventCountForAggregate</span><span class="op">(</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> aggregateType<span class="op">,</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> aggregateId</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span></code></pre></div>
<h2 id="aggregate-existence-and-discovery">Aggregate Existence and
Discovery</h2>
<div class="sourceCode" id="cb5"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventStorePort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Checks if an aggregate exists by verifying presence of events</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables efficient existence verification without loading complete event history</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">aggregateType</span><span class="co"> </span>the type of aggregate</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">aggregateId</span><span class="co"> </span>the unique identifier of the aggregate instance</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> true if the aggregate has at least one event indicating its existence</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if existence cannot be checked due to storage issues</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="dt">boolean</span> <span class="fu">aggregateExists</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> aggregateType<span class="op">,</span> <span class="dt">final</span> <span class="bu">String</span> aggregateId<span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets all known aggregate types for system discovery and analysis</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables comprehensive system analysis and aggregate type discovery</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> list of aggregate type names for system<span class="co">-</span>wide analysis</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if aggregate types cannot be retrieved due to storage issues</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> <span class="fu">getAggregateTypes</span><span class="op">()</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets all aggregate IDs for a specific type for comprehensive analysis</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables complete aggregate instance discovery and analysis within a type</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">aggregateType</span><span class="co"> </span>the type of aggregate for instance discovery</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> list of aggregate IDs for comprehensive instance analysis</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if aggregate IDs cannot be retrieved due to storage issues</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> <span class="fu">getAggregateIds</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> aggregateType<span class="op">)</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span></code></pre></div>
<h1 id="system-health-and-operational-monitoring">System Health and
Operational Monitoring</h1>
<h2 id="health-monitoring-and-accessibility-verification">Health
Monitoring and Accessibility Verification</h2>
<div class="sourceCode" id="cb6"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventStorePort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Checks if the event store is healthy and accessible for operations</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables proactive system health monitoring and operational confidence</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if the event store can be accessed and used for all operations</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="dt">boolean</span> <span class="fu">isHealthy</span><span class="op">();</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the total number of events stored across all aggregates for system analytics</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This provides comprehensive system<span class="co">-</span>wide event volume metrics for capacity planning</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> the total count of events across all aggregates for system<span class="co">-</span>wide analysis</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">EventStoreException</span><span class="co"> </span>if count cannot be retrieved due to storage issues</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="fu">getTotalEventCount</span><span class="op">()</span> <span class="kw">throws</span> EventStoreException<span class="op">;</span></span></code></pre></div>
<h1
id="integration-with-bytehot-event-sourcing-architecture">Integration
with ByteHot Event Sourcing Architecture</h1>
<h2 id="domain-event-processing-integration">Domain Event Processing
Integration</h2>
<p>The EventStorePort integrates seamlessly with ByteHot's domain event
processing:</p>
<ul>
<li><strong><strong>Event Persistence</strong></strong>: All domain
events flow through this port for persistent storage</li>
<li><strong><strong>Aggregate Reconstruction</strong></strong>: Enables
complete aggregate state reconstruction from event history</li>
<li><strong><strong>Temporal Analysis</strong></strong>: Supports
sophisticated temporal analysis of system behavior</li>
<li><strong><strong>Debugging Support</strong></strong>: Provides
comprehensive event history for debugging and forensic analysis</li>
</ul>
<h2 id="hexagonal-architecture-compliance">Hexagonal Architecture
Compliance</h2>
<p>The port follows strict hexagonal architecture principles:</p>
<ul>
<li><strong><strong>Technology Agnostic</strong></strong>: Interface
defines behavior without implementation constraints</li>
<li><strong><strong>Clean Boundaries</strong></strong>: Clear separation
between domain logic and storage technology</li>
<li><strong><strong>Dependency Inversion</strong></strong>: Domain
depends on abstraction, not concrete implementations</li>
<li><strong><strong>Testability</strong></strong>: Enables comprehensive
testing through mock implementations</li>
</ul>
<h2 id="event-sourcing-pattern-implementation">Event Sourcing Pattern
Implementation</h2>
<p>The design supports comprehensive event sourcing patterns:</p>
<ul>
<li><strong><strong>Immutable Event Streams</strong></strong>: All
events are immutable and append-only</li>
<li><strong><strong>Complete Audit Trails</strong></strong>: Every
domain state change is captured as an event</li>
<li><strong><strong>State Reconstruction</strong></strong>: Any
aggregate state can be reconstructed from events</li>
<li><strong><strong>Temporal Queries</strong></strong>: Support for
sophisticated time-based analysis and queries</li>
</ul>
<h1 id="performance-and-scalability-considerations">Performance and
Scalability Considerations</h1>
<h2 id="query-optimization-strategies">Query Optimization
Strategies</h2>
<p>The interface supports various optimization strategies:</p>
<ul>
<li><strong><strong>Incremental Loading</strong></strong>: <code
class="verbatim">getEventsForAggregateSince</code> enables efficient
incremental updates</li>
<li><strong><strong>Type-Based Filtering</strong></strong>: <code
class="verbatim">getEventsByType</code> enables efficient
cross-aggregate analysis</li>
<li><strong><strong>Temporal Filtering</strong></strong>: <code
class="verbatim">getEventsBetween</code> enables efficient time-based
queries</li>
<li><strong><strong>Existence Checking</strong></strong>: <code
class="verbatim">aggregateExists</code> provides efficient existence
verification</li>
</ul>
<h2 id="scalability-support">Scalability Support</h2>
<p>The design accommodates large-scale deployments:</p>
<ul>
<li><strong><strong>Aggregate Partitioning</strong></strong>:
Aggregate-based operations enable horizontal partitioning</li>
<li><strong><strong>Event Type Partitioning</strong></strong>:
Type-based queries support event type partitioning</li>
<li><strong><strong>Temporal Partitioning</strong></strong>: Time-based
queries support temporal partitioning strategies</li>
<li><strong><strong>Read Optimization</strong></strong>: Separate read
and write operations enable CQRS patterns</li>
</ul>
<h2 id="memory-efficiency">Memory Efficiency</h2>
<p>The interface design promotes memory efficiency:</p>
<ul>
<li><strong><strong>Streaming Support</strong></strong>: List return
types can be implemented as streams for large datasets</li>
<li><strong><strong>Lazy Loading</strong></strong>: Operations can be
implemented with lazy loading for memory optimization</li>
<li><strong><strong>Pagination Support</strong></strong>: Interface can
be extended with pagination for large result sets</li>
<li><strong><strong>Resource Management</strong></strong>: Exception
handling ensures proper resource cleanup</li>
</ul>
<h1 id="error-handling-and-resilience">Error Handling and
Resilience</h1>
<h2 id="comprehensive-exception-management">Comprehensive Exception
Management</h2>
<p>The port provides robust exception handling:</p>
<ul>
<li><strong><strong>EventStoreException</strong></strong>: Specific
exception type for storage-related issues</li>
<li><strong><strong>Descriptive Error Messages</strong></strong>: Clear
indication of failure reasons and recovery suggestions</li>
<li><strong><strong>Operation Safety</strong></strong>: All operations
are designed to fail safely without data corruption</li>
<li><strong><strong>Transactional Semantics</strong></strong>:
Operations can be implemented with transactional guarantees</li>
</ul>
<h2 id="resilience-patterns-support">Resilience Patterns Support</h2>
<p>The design supports various resilience patterns:</p>
<ul>
<li><strong><strong>Circuit Breaker</strong></strong>: <code
class="verbatim">isHealthy()</code> enables circuit breaker pattern
implementation</li>
<li><strong><strong>Retry Logic</strong></strong>: Exception handling
supports retry mechanism implementation</li>
<li><strong><strong>Fallback Strategies</strong></strong>: Multiple
storage implementations can provide fallback capabilities</li>
<li><strong><strong>Monitoring Integration</strong></strong>: Health
checks enable comprehensive monitoring integration</li>
</ul>
<h1 id="implementation-strategies-and-adapters">Implementation
Strategies and Adapters</h1>
<h2 id="multiple-storage-backend-support">Multiple Storage Backend
Support</h2>
<p>The port abstraction enables various storage implementations:</p>
<ul>
<li><strong><strong>Filesystem Storage</strong></strong>: Simple
file-based storage for development and small deployments</li>
<li><strong><strong>Database Storage</strong></strong>: Relational or
NoSQL database storage for enterprise deployments</li>
<li><strong><strong>Distributed Storage</strong></strong>: Event
streaming platforms like Kafka for high-scale deployments</li>
<li><strong><strong>Hybrid Strategies</strong></strong>: Combination of
storage backends for different use cases</li>
</ul>
<h2 id="technology-integration-examples">Technology Integration
Examples</h2>
<p>The interface accommodates various technology stacks:</p>
<ul>
<li><strong><strong>SQL Databases</strong></strong>: PostgreSQL, MySQL
with event tables and JSON columns</li>
<li><strong><strong>NoSQL Databases</strong></strong>: MongoDB,
Cassandra with document or column-family storage</li>
<li><strong><strong>Event Streaming</strong></strong>: Apache Kafka,
Apache Pulsar for distributed event streaming</li>
<li><strong><strong>Cloud Storage</strong></strong>: AWS DynamoDB, Azure
Cosmos DB for cloud-native deployments</li>
</ul>
<h1 id="related-documentation">Related Documentation</h1>
<ul>
<li><span class="spurious-link"
target="FilesystemEventStoreAdapter.org"><em>FilesystemEventStoreAdapter</em></span>:
Primary implementation of this port</li>
<li><span class="spurious-link"
target="EventSerializationSupport.org"><em>EventSerializationSupport</em></span>:
Event serialization for storage operations</li>
<li><span class="spurious-link"
target="AbstractVersionedDomainEvent.org"><em>AbstractVersionedDomainEvent</em></span>:
Base class for stored events</li>
<li><span class="spurious-link"
target="EventStoreException.org"><em>EventStoreException</em></span>:
Exception type for storage operations</li>
<li><span class="spurious-link"
target="flows/event-sourcing-persistence-flow.org"><em>Event Sourcing
Persistence Flow</em></span>: Complete persistence workflow
documentation</li>
</ul>
<h1 id="implementation-notes">Implementation Notes</h1>
<h2 id="design-patterns-applied">Design Patterns Applied</h2>
<p>The port leverages several sophisticated design patterns:</p>
<ul>
<li><strong><strong>Repository Pattern</strong></strong>: Abstracts data
access and storage implementation details</li>
<li><strong><strong>Port and Adapter Pattern</strong></strong>: Clean
separation between domain and infrastructure</li>
<li><strong><strong>Strategy Pattern</strong></strong>: Multiple storage
implementations for different deployment needs</li>
<li><strong><strong>Observer Pattern</strong></strong>: Event
notification and streaming capabilities</li>
</ul>
<h2 id="domain-driven-design-principles">Domain-Driven Design
Principles</h2>
<p>The implementation follows strict DDD principles:</p>
<ul>
<li><strong><strong>Pure Domain Interface</strong></strong>: No
infrastructure dependencies in the port definition</li>
<li><strong><strong>Rich Query Capabilities</strong></strong>:
Comprehensive querying for domain analysis needs</li>
<li><strong><strong>Aggregate Boundary Respect</strong></strong>:
Operations aligned with aggregate boundaries</li>
<li><strong><strong>Event Sourcing Integration</strong></strong>:
Complete integration with event sourcing patterns</li>
</ul>
<h2 id="future-enhancement-opportunities">Future Enhancement
Opportunities</h2>
<p>The design supports future enhancements:</p>
<ul>
<li><strong><strong>Advanced Querying</strong></strong>: GraphQL-style
querying for complex event analysis</li>
<li><strong><strong>Event Versioning</strong></strong>: Schema evolution
support for long-term event compatibility</li>
<li><strong><strong>Performance Analytics</strong></strong>: Built-in
performance monitoring and optimization</li>
<li><strong><strong>Distributed Transactions</strong></strong>: Support
for distributed transaction patterns</li>
</ul>
<p>The EventStorePort provides ByteHot's essential event sourcing
foundation while maintaining clean architectural boundaries,
comprehensive functionality, and extensibility for advanced event
storage and analysis capabilities throughout the entire intelligent
event-driven system lifecycle.</p>
</main>
<div class="footer">
    ByteHot - Revolutionary JVM Hot-Swapping | 
    <a href="https://github.com/rydnr/bytehot">GitHub</a> | 
    <a href="https://rydnr.github.io/bytehot/docs/">Documentation</a> | 
    <a href="https://rydnr.github.io/bytehot/javadocs/">API Docs</a>
</div>
</body></html>
