<!DOCTYPE html>
<html>
<head>
    <title>EventEmitterPort - ByteHot Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="navigation">
    <a href="../index.html">üè† Home</a>
    <a href="../implementation.html">üèóÔ∏è Implementation</a>
    <a href="../journal.html">üìî Journal</a>
    <a href="../docs/">üìö Docs</a>
    <a href="../javadocs/">üìñ Javadocs</a>
    <a href="https://github.com/rydnr/bytehot">üîó GitHub</a>
</div>
<main>
<h1 id="overview">Overview</h1>
<p>The <code>EventEmitterPort</code> interface serves as ByteHot's
sophisticated domain event publishing abstraction, defining a
comprehensive contract for emitting domain response events to external
systems, monitoring infrastructure, and integration endpoints. This
critical secondary port abstracts event emission implementation details
from domain logic, enabling flexible publishing strategies including
logging, messaging, streaming, and database persistence while
maintaining consistency and reliability across diverse deployment
scenarios. As the cornerstone of ByteHot's event-driven integration
architecture, it provides the foundation for real-time monitoring,
analytics, external system coordination, and comprehensive observability
throughout the intelligent hot-swap system lifecycle.</p>
<h1 id="domain-architecture-role">Domain Architecture Role</h1>
<h2 id="secondary-port-for-event-publication">Secondary Port for Event
Publication</h2>
<p>EventEmitterPort serves as a fundamental secondary port in ByteHot's
hexagonal architecture:</p>
<ul>
<li>Abstracts event emission implementation details from domain logic
and business processes</li>
<li>Enables multiple emission strategies including logging, messaging,
streaming, and persistence</li>
<li>Provides clean separation between event generation and external
system integration</li>
<li>Acts as the domain's gateway to external monitoring, analytics, and
integration systems</li>
</ul>
<h2 id="event-driven-architecture-foundation">Event-Driven Architecture
Foundation</h2>
<p>The port provides comprehensive event-driven architecture
foundation:</p>
<ul>
<li>Supports real-time event streaming for immediate system
responsiveness</li>
<li>Enables batch event processing for efficient resource utilization
and performance</li>
<li>Provides event emission health monitoring for system reliability and
observability</li>
<li>Supports sophisticated event correlation and tracing across
distributed systems</li>
</ul>
<h2 id="integration-and-observability-gateway">Integration and
Observability Gateway</h2>
<p>The implementation serves as the gateway for system integration and
observability:</p>
<ul>
<li>Enables real-time monitoring and alerting through event emission to
monitoring systems</li>
<li>Supports comprehensive analytics and business intelligence through
event data streams</li>
<li>Provides integration points for external systems requiring ByteHot
event notifications</li>
<li>Enables sophisticated debugging and forensic analysis through
comprehensive event emission</li>
</ul>
<h1 id="core-event-emission-operations">Core Event Emission
Operations</h1>
<h2 id="primary-single-event-emission-interface">Primary Single Event
Emission Interface</h2>
<div class="sourceCode" id="cb1"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventEmitterPort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Emits a single domain event to configured external systems with comprehensive error handling</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This is the primary entry point for single event emission in the event<span class="co">-</span>driven architecture</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">event</span><span class="co"> </span>the domain response event to emit with complete context and metadata</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">Exception</span><span class="co"> </span>if emission fails due to connectivity<span class="co">,</span> configuration<span class="co">,</span> or processing issues</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span><span class="dt">final</span> DomainResponseEvent<span class="op">&lt;?&gt;</span> event<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span><span class="op">;</span></span></code></pre></div>
<h2 id="batch-event-emission-for-performance-optimization">Batch Event
Emission for Performance Optimization</h2>
<div class="sourceCode" id="cb2"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventEmitterPort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Emits multiple domain events efficiently with batch processing optimization</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables efficient bulk event emission for high<span class="co">-</span>throughput scenarios</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">events</span><span class="co"> </span>the collection of domain response events to emit as a batch</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">Exception</span><span class="co"> </span>if emission fails due to connectivity<span class="co">,</span> configuration<span class="co">,</span> or processing issues</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span><span class="dt">final</span> <span class="bu">List</span><span class="op">&lt;</span>DomainResponseEvent<span class="op">&lt;?&gt;&gt;</span> events<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span><span class="op">;</span></span></code></pre></div>
<h2 id="health-monitoring-and-availability-checking">Health Monitoring
and Availability Checking</h2>
<div class="sourceCode" id="cb3"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventEmitterPort.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Checks if event emission is available and operational for proactive monitoring</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables circuit breaker patterns and health monitoring for system reliability</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if events can be emitted successfully to configured targets</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="dt">boolean</span> <span class="fu">isEmissionAvailable</span><span class="op">();</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns the emission target description for debugging and operational visibility</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This provides comprehensive information about emission targets for troubleshooting</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> human<span class="co">-</span>readable description of where events are emitted including configuration details</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> <span class="fu">getEmissionTarget</span><span class="op">();</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns the number of events emitted for performance monitoring and analytics</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> This enables comprehensive performance analysis and system utilization tracking</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> count of successfully emitted events since system initialization</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> <span class="fu">getEmittedEventCount</span><span class="op">();</span></span></code></pre></div>
<h1 id="event-emission-patterns-and-strategies">Event Emission Patterns
and Strategies</h1>
<h2 id="multiple-emission-target-support">Multiple Emission Target
Support</h2>
<p>The EventEmitterPort abstraction enables various emission
implementations:</p>
<ul>
<li><strong><strong>Logging-Based Emission</strong></strong>: Structured
logging for development and debugging scenarios</li>
<li><strong><strong>Message Queue Emission</strong></strong>: Apache
Kafka, RabbitMQ, or AWS SQS for distributed processing</li>
<li><strong><strong>Database Emission</strong></strong>: Direct database
persistence for analytics and audit requirements</li>
<li><strong><strong>HTTP/REST Emission</strong></strong>: Webhook-style
emission to REST APIs and microservices</li>
<li><strong><strong>Stream Processing</strong></strong>: Real-time
streaming to Apache Kafka, Apache Pulsar, or cloud streams</li>
</ul>
<h2 id="real-time-vs.-batch-processing-strategies">Real-Time vs. Batch
Processing Strategies</h2>
<p>The port supports sophisticated processing patterns:</p>
<ul>
<li><strong><strong>Real-Time Processing</strong></strong>: Immediate
event emission for time-sensitive integrations</li>
<li><strong><strong>Batch Processing</strong></strong>: Efficient bulk
processing for high-volume scenarios</li>
<li><strong><strong>Hybrid Processing</strong></strong>: Combination of
real-time critical events with batch processing for others</li>
<li><strong><strong>Priority-Based Processing</strong></strong>:
Different processing strategies based on event priority and type</li>
</ul>
<h2 id="event-transformation-and-enrichment">Event Transformation and
Enrichment</h2>
<p>The implementation can support sophisticated event processing:</p>
<ul>
<li><strong><strong>Event Transformation</strong></strong>: Conversion
between different event formats and schemas</li>
<li><strong><strong>Event Enrichment</strong></strong>: Addition of
contextual information for downstream processing</li>
<li><strong><strong>Event Filtering</strong></strong>: Selective
emission based on event type, content, or business rules</li>
<li><strong><strong>Event Correlation</strong></strong>: Addition of
correlation identifiers for distributed tracing</li>
</ul>
<h1 id="integration-with-bytehot-event-system">Integration with ByteHot
Event System</h1>
<h2 id="domain-response-event-processing">Domain Response Event
Processing</h2>
<p>The port processes various ByteHot domain response events:</p>
<ul>
<li><strong><strong>ClassFileProcessed</strong></strong>: Events
indicating successful file processing</li>
<li><strong><strong>HotSwapRequested</strong></strong>: Events
triggering JVM class redefinition operations</li>
<li><strong><strong>ClassRedefinitionSucceeded</strong></strong>: Events
confirming successful hot-swap operations</li>
<li><strong><strong>ClassRedefinitionFailed</strong></strong>: Events
indicating hot-swap failures with error context</li>
<li><strong><strong>InstancesUpdated</strong></strong>: Events
confirming successful instance updates</li>
</ul>
<h2 id="event-sourcing-integration">Event Sourcing Integration</h2>
<p>The port integrates seamlessly with event sourcing:</p>
<ul>
<li><strong><strong>Event Persistence</strong></strong>: Emission to
event stores for complete audit trails</li>
<li><strong><strong>Event Replay</strong></strong>: Support for event
replay and system state reconstruction</li>
<li><strong><strong>Event Versioning</strong></strong>: Support for
event schema evolution and migration</li>
<li><strong><strong>Event Correlation</strong></strong>: Maintenance of
event correlation and causal relationships</li>
</ul>
<h2 id="analytics-and-monitoring-integration">Analytics and Monitoring
Integration</h2>
<p>The implementation supports comprehensive analytics:</p>
<ul>
<li><strong><strong>Performance Metrics</strong></strong>: Event
emission performance and throughput monitoring</li>
<li><strong><strong>Business Analytics</strong></strong>: Business
intelligence through domain event analysis</li>
<li><strong><strong>System Health Monitoring</strong></strong>:
Real-time system health through event stream analysis</li>
<li><strong><strong>User Behavior Analytics</strong></strong>:
Development workflow optimization through event analysis</li>
</ul>
<h1 id="error-handling-and-resilience-patterns">Error Handling and
Resilience Patterns</h1>
<h2 id="comprehensive-exception-management">Comprehensive Exception
Management</h2>
<p>The port provides robust exception handling:</p>
<ul>
<li><strong><strong>Emission Failure Exceptions</strong></strong>:
Specific exceptions for different failure scenarios</li>
<li><strong><strong>Retry Logic</strong></strong>: Built-in retry
mechanisms for transient failures</li>
<li><strong><strong>Circuit Breaker Integration</strong></strong>:
Protection against cascading failures through circuit breakers</li>
<li><strong><strong>Fallback Strategies</strong></strong>: Alternative
emission strategies for system resilience</li>
</ul>
<h2 id="resilience-and-fault-tolerance">Resilience and Fault
Tolerance</h2>
<p>The design supports various resilience patterns:</p>
<ul>
<li><strong><strong>Multiple Target Fallback</strong></strong>:
Automatic fallback to alternative emission targets</li>
<li><strong><strong>Local Buffering</strong></strong>: Local event
buffering for offline scenarios and connectivity issues</li>
<li><strong><strong>Event Replay</strong></strong>: Replay of failed
events when connectivity is restored</li>
<li><strong><strong>Graceful Degradation</strong></strong>: Continued
operation with reduced functionality during failures</li>
</ul>
<h2 id="health-monitoring-and-recovery">Health Monitoring and
Recovery</h2>
<p>The port enables comprehensive health monitoring:</p>
<ul>
<li><strong><strong>Availability Monitoring</strong></strong>:
Continuous monitoring of emission target availability</li>
<li><strong><strong>Performance Monitoring</strong></strong>: Monitoring
of emission performance and latency</li>
<li><strong><strong>Error Rate Monitoring</strong></strong>: Tracking of
emission error rates and failure patterns</li>
<li><strong><strong>Automatic Recovery</strong></strong>: Automatic
recovery from transient failures and connectivity issues</li>
</ul>
<h1 id="performance-optimization-and-scalability">Performance
Optimization and Scalability</h1>
<h2 id="emission-performance-optimization">Emission Performance
Optimization</h2>
<p>The interface supports various optimization strategies:</p>
<ul>
<li><strong><strong>Asynchronous Emission</strong></strong>:
Non-blocking event emission for performance optimization</li>
<li><strong><strong>Batch Processing</strong></strong>: Efficient batch
emission for high-volume scenarios</li>
<li><strong><strong>Connection Pooling</strong></strong>: Efficient
connection management for external systems</li>
<li><strong><strong>Compression</strong></strong>: Event compression for
bandwidth optimization</li>
</ul>
<h2 id="memory-and-resource-management">Memory and Resource
Management</h2>
<p>The implementation promotes efficient resource usage:</p>
<ul>
<li><strong><strong>Memory-Efficient Buffering</strong></strong>:
Efficient memory usage for event buffering and queuing</li>
<li><strong><strong>Resource Cleanup</strong></strong>: Proper cleanup
of emission resources and connections</li>
<li><strong><strong>Garbage Collection Optimization</strong></strong>:
Design optimized for efficient garbage collection</li>
<li><strong><strong>Thread Safety</strong></strong>: Thread-safe design
for concurrent event emission</li>
</ul>
<h2 id="scalability-considerations">Scalability Considerations</h2>
<p>The design accommodates large-scale deployments:</p>
<ul>
<li><strong><strong>Horizontal Scaling</strong></strong>: Support for
distributed event emission across multiple instances</li>
<li><strong><strong>Load Balancing</strong></strong>: Load balancing
across multiple emission targets</li>
<li><strong><strong>Partitioning</strong></strong>: Event partitioning
for distributed processing and scalability</li>
<li><strong><strong>Cloud Integration</strong></strong>: Native
integration with cloud-based messaging and streaming services</li>
</ul>
<h1 id="implementation-examples-and-integration-patterns">Implementation
Examples and Integration Patterns</h1>
<h2 id="logging-based-implementation">Logging-Based Implementation</h2>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> LoggingEventEmitterAdapter <span class="kw">implements</span> EventEmitterPort <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">Logger</span> eventLogger<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> ObjectMapper jsonMapper<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">volatile</span> <span class="dt">long</span> eventCount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span>DomainResponseEvent<span class="op">&lt;?&gt;</span> event<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">String</span> eventJson <span class="op">=</span> jsonMapper<span class="op">.</span><span class="fu">writeValueAsString</span><span class="op">(</span>event<span class="op">);</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        eventLogger<span class="op">.</span><span class="fu">info</span><span class="op">(</span><span class="st">&quot;Event emitted: {}&quot;</span><span class="op">,</span> eventJson<span class="op">);</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        eventCount<span class="op">++;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span><span class="bu">List</span><span class="op">&lt;</span>DomainResponseEvent<span class="op">&lt;?&gt;&gt;</span> events<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>DomainResponseEvent<span class="op">&lt;?&gt;</span> event <span class="op">:</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">emit</span><span class="op">(</span>event<span class="op">);</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isEmissionAvailable</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> eventLogger<span class="op">.</span><span class="fu">isInfoEnabled</span><span class="op">();</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getEmissionTarget</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Structured Logging&quot;</span><span class="op">;</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">long</span> <span class="fu">getEmittedEventCount</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> eventCount<span class="op">;</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="message-queue-implementation">Message Queue Implementation</h2>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> KafkaEventEmitterAdapter <span class="kw">implements</span> EventEmitterPort <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> KafkaProducer<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> producer<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> topicName<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> ObjectMapper jsonMapper<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">AtomicLong</span> eventCount <span class="op">=</span> <span class="kw">new</span> <span class="bu">AtomicLong</span><span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span>DomainResponseEvent<span class="op">&lt;?&gt;</span> event<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">String</span> eventJson <span class="op">=</span> jsonMapper<span class="op">.</span><span class="fu">writeValueAsString</span><span class="op">(</span>event<span class="op">);</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">String</span> eventKey <span class="op">=</span> event<span class="op">.</span><span class="fu">getEventType</span><span class="op">();</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        ProducerRecord<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> <span class="kw">record</span> <span class="op">=</span> <span class="kw">new</span> ProducerRecord<span class="op">&lt;&gt;(</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            topicName<span class="op">,</span> eventKey<span class="op">,</span> eventJson<span class="op">);</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        producer<span class="op">.</span><span class="fu">send</span><span class="op">(</span><span class="kw">record</span><span class="op">).</span><span class="fu">get</span><span class="op">();</span> <span class="co">// Synchronous send for reliability</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        eventCount<span class="op">.</span><span class="fu">incrementAndGet</span><span class="op">();</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span><span class="bu">List</span><span class="op">&lt;</span>DomainResponseEvent<span class="op">&lt;?&gt;&gt;</span> events<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="bu">List</span><span class="op">&lt;</span><span class="bu">Future</span><span class="op">&lt;</span>RecordMetadata<span class="op">&gt;&gt;</span> futures <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>DomainResponseEvent<span class="op">&lt;?&gt;</span> event <span class="op">:</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>            <span class="bu">String</span> eventJson <span class="op">=</span> jsonMapper<span class="op">.</span><span class="fu">writeValueAsString</span><span class="op">(</span>event<span class="op">);</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>            <span class="bu">String</span> eventKey <span class="op">=</span> event<span class="op">.</span><span class="fu">getEventType</span><span class="op">();</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>            ProducerRecord<span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> <span class="kw">record</span> <span class="op">=</span> <span class="kw">new</span> ProducerRecord<span class="op">&lt;&gt;(</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                topicName<span class="op">,</span> eventKey<span class="op">,</span> eventJson<span class="op">);</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>            futures<span class="op">.</span><span class="fu">add</span><span class="op">(</span>producer<span class="op">.</span><span class="fu">send</span><span class="op">(</span><span class="kw">record</span><span class="op">));</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Wait for all sends to complete</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="bu">Future</span><span class="op">&lt;</span>RecordMetadata<span class="op">&gt;</span> future <span class="op">:</span> futures<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>            future<span class="op">.</span><span class="fu">get</span><span class="op">();</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>            eventCount<span class="op">.</span><span class="fu">incrementAndGet</span><span class="op">();</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isEmissionAvailable</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Check if Kafka cluster is available</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> producer <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> <span class="fu">isKafkaHealthy</span><span class="op">();</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getEmissionTarget</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Apache Kafka Topic: &quot;</span> <span class="op">+</span> topicName<span class="op">;</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">long</span> <span class="fu">getEmittedEventCount</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> eventCount<span class="op">.</span><span class="fu">get</span><span class="op">();</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="database-persistence-implementation">Database Persistence
Implementation</h2>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> DatabaseEventEmitterAdapter <span class="kw">implements</span> EventEmitterPort <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> EventRepository eventRepository<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> EventSerializer serializer<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">AtomicLong</span> eventCount <span class="op">=</span> <span class="kw">new</span> <span class="bu">AtomicLong</span><span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span>DomainResponseEvent<span class="op">&lt;?&gt;</span> event<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        EventRecord <span class="kw">record</span> <span class="op">=</span> serializer<span class="op">.</span><span class="fu">serialize</span><span class="op">(</span>event<span class="op">);</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        eventRepository<span class="op">.</span><span class="fu">save</span><span class="op">(</span><span class="kw">record</span><span class="op">);</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        eventCount<span class="op">.</span><span class="fu">incrementAndGet</span><span class="op">();</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">emit</span><span class="op">(</span><span class="bu">List</span><span class="op">&lt;</span>DomainResponseEvent<span class="op">&lt;?&gt;&gt;</span> events<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">List</span><span class="op">&lt;</span>EventRecord<span class="op">&gt;</span> records <span class="op">=</span> events<span class="op">.</span><span class="fu">stream</span><span class="op">()</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">map</span><span class="op">(</span>serializer<span class="op">::</span>serialize<span class="op">)</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">collect</span><span class="op">(</span>Collectors<span class="op">.</span><span class="fu">toList</span><span class="op">());</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        eventRepository<span class="op">.</span><span class="fu">saveAll</span><span class="op">(</span>records<span class="op">);</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        eventCount<span class="op">.</span><span class="fu">addAndGet</span><span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">());</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isEmissionAvailable</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> eventRepository<span class="op">.</span><span class="fu">isHealthy</span><span class="op">();</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getEmissionTarget</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Database: &quot;</span> <span class="op">+</span> eventRepository<span class="op">.</span><span class="fu">getConnectionInfo</span><span class="op">();</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">long</span> <span class="fu">getEmittedEventCount</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> eventCount<span class="op">.</span><span class="fu">get</span><span class="op">();</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="integration-with-application-layer">Integration with Application
Layer</h1>
<h2 id="bytehotapplication-integration">ByteHotApplication
Integration</h2>
<p>The EventEmitterPort integrates with ByteHotApplication for
comprehensive event processing:</p>
<ul>
<li><strong><strong>Event Routing</strong></strong>: Automatic routing
of domain response events to emission infrastructure</li>
<li><strong><strong>Error Handling</strong></strong>: Comprehensive
error handling with fallback strategies</li>
<li><strong><strong>Performance Monitoring</strong></strong>:
Integration with application performance monitoring</li>
<li><strong><strong>Configuration Management</strong></strong>: Dynamic
configuration of emission targets and strategies</li>
</ul>
<h2 id="event-processing-pipeline-integration">Event Processing Pipeline
Integration</h2>
<p>The port integrates with the complete event processing pipeline:</p>
<ul>
<li><strong><strong>Event Generation</strong></strong>: Reception of
events from domain aggregates and services</li>
<li><strong><strong>Event Validation</strong></strong>: Validation of
events before emission for data integrity</li>
<li><strong><strong>Event Transformation</strong></strong>:
Transformation of events for external system compatibility</li>
<li><strong><strong>Event Correlation</strong></strong>: Maintenance of
event correlation and tracing information</li>
</ul>
<h1 id="related-documentation">Related Documentation</h1>
<ul>
<li><span class="spurious-link"
target="EventEmitterAdapter.org"><em>EventEmitterAdapter</em></span>:
Primary infrastructure implementation of this port</li>
<li><span class="spurious-link"
target="ByteHotApplication.org"><em>ByteHotApplication</em></span>:
Primary user of this port for event emission</li>
<li><span class="spurious-link"
target="AbstractVersionedDomainEvent.org"><em>AbstractVersionedDomainEvent</em></span>:
Base class for events emitted through this port</li>
<li><span class="spurious-link"
target="flows/event-sourcing-persistence-flow.org"><em>Event Sourcing
Persistence Flow</em></span>: Complete event emission workflow</li>
<li><span class="spurious-link"
target="EventSerializationSupport.org"><em>EventSerializationSupport</em></span>:
Event serialization for emission operations</li>
</ul>
<h1 id="implementation-notes">Implementation Notes</h1>
<h2 id="design-patterns-applied">Design Patterns Applied</h2>
<p>The port leverages several sophisticated design patterns:</p>
<ul>
<li><strong><strong>Port and Adapter Pattern</strong></strong>: Clean
separation between event emission concerns and implementation</li>
<li><strong><strong>Strategy Pattern</strong></strong>: Multiple
emission strategies for different deployment scenarios</li>
<li><strong><strong>Observer Pattern</strong></strong>: Event
notification and streaming capabilities</li>
<li><strong><strong>Template Method Pattern</strong></strong>: Common
emission workflow with customizable implementation steps</li>
</ul>
<h2 id="domain-driven-design-principles">Domain-Driven Design
Principles</h2>
<p>The implementation follows strict DDD principles:</p>
<ul>
<li><strong><strong>Pure Domain Interface</strong></strong>: No
infrastructure dependencies in the port definition</li>
<li><strong><strong>Rich Event Processing</strong></strong>:
Comprehensive event processing capabilities</li>
<li><strong><strong>Event-Driven Architecture</strong></strong>:
Complete integration with event-driven patterns</li>
<li><strong><strong>Aggregate Integration</strong></strong>: Proper
integration with domain aggregates and boundaries</li>
</ul>
<h2 id="future-enhancement-opportunities">Future Enhancement
Opportunities</h2>
<p>The design supports future enhancements:</p>
<ul>
<li><strong><strong>Advanced Event Processing</strong></strong>: Complex
event processing for pattern detection and analytics</li>
<li><strong><strong>Machine Learning Integration</strong></strong>:
AI-driven event analysis and intelligent routing</li>
<li><strong><strong>Advanced Monitoring</strong></strong>: Enhanced
monitoring and observability capabilities</li>
<li><strong><strong>Cloud-Native Integration</strong></strong>: Native
integration with cloud event streaming services</li>
</ul>
<p>The EventEmitterPort provides ByteHot's essential event emission
foundation while maintaining clean architectural boundaries,
comprehensive functionality, and extensibility for advanced event
processing and integration scenarios throughout the entire intelligent
event-driven system lifecycle.</p>
</main>
<div class="footer">
    ByteHot - Revolutionary JVM Hot-Swapping | 
    <a href="https://github.com/rydnr/bytehot">GitHub</a> | 
    <a href="https://rydnr.github.io/bytehot/docs/">Documentation</a> | 
    <a href="https://rydnr.github.io/bytehot/javadocs/">API Docs</a>
</div>
</body></html>
