<!DOCTYPE html>
<html>
<head>
    <title>RollbackOperation - ByteHot Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="navigation">
    <a href="../index.html">üè† Home</a>
    <a href="../implementation.html">üèóÔ∏è Implementation</a>
    <a href="../journal.html">üìî Journal</a>
    <a href="../docs/">üìö Docs</a>
    <a href="../javadocs/">üìñ Javadocs</a>
    <a href="https://github.com/rydnr/bytehot">üîó GitHub</a>
</div>
<main>
<h1 id="overview">Overview</h1>
<p>The <code>RollbackOperation</code> enumeration serves as ByteHot's
sophisticated intelligent rollback operation classification and
execution strategy system, providing comprehensive rollback type
definitions, advanced operation categorization, and intelligent rollback
coordination for precise state management and automated restoration
intelligence. This critical domain enumeration encapsulates rollback
operation types, execution strategies, and sophisticated operation
classification mechanisms that enable precise rollback management and
automated restoration coordination. As the operation foundation for
ByteHot's rollback management system, it enables comprehensive rollback
classification while maintaining clean domain boundaries and supporting
advanced rollback analytics, operation intelligence, and execution
coordination throughout the entire intelligent hot-swap system
lifecycle.</p>
<h1 id="domain-architecture-role">Domain Architecture Role</h1>
<h2
id="intelligent-rollback-classification-and-operation-strategy-foundation">Intelligent
Rollback Classification and Operation Strategy Foundation</h2>
<p>RollbackOperation serves as the comprehensive intelligent rollback
classification and operation strategy foundation:</p>
<ul>
<li>Provides sophisticated rollback operation classification for state
management and restoration coordination</li>
<li>Enables comprehensive operation categorization and execution
strategy management through advanced type analysis</li>
<li>Supports intelligent rollback coordination and operation automation
through domain-driven operation patterns</li>
<li>Acts as the authoritative foundation for rollback operation
classification and strategy-driven coordination</li>
</ul>
<h2 id="enumeration-design-and-operation-intelligence-hub">Enumeration
Design and Operation Intelligence Hub</h2>
<p>The enumeration serves as the enumeration design and operation
intelligence hub:</p>
<ul>
<li>Implements sophisticated enumeration patterns with operation
encapsulation and behavioral intelligence methods</li>
<li>Provides comprehensive operation validation and consistency through
domain-driven design principles</li>
<li>Enables operation composition and correlation capabilities for
complex rollback execution scenarios</li>
<li>Supports operation optimization and performance enhancement through
efficient enumeration design patterns</li>
</ul>
<h2
id="state-management-intelligence-and-automated-restoration-hub">State
Management Intelligence and Automated Restoration Hub</h2>
<p>The implementation provides state management intelligence and
automated restoration capabilities:</p>
<ul>
<li>Enables sophisticated state management intelligence through
comprehensive operation analysis and restoration coordination</li>
<li>Supports advanced automated restoration and rollback execution
through operation-driven coordination</li>
<li>Provides foundation for rollback analytics and operational
intelligence through operation-driven correlation</li>
<li>Enables intelligent rollback monitoring and optimization through
operation-driven execution and assessment</li>
</ul>
<h1
id="rollback-operation-structure-and-behavioral-intelligence">Rollback
Operation Structure and Behavioral Intelligence</h1>
<h2
id="core-operation-enumeration-values-and-restoration-strategies">Core
Operation Enumeration Values and Restoration Strategies</h2>
<div class="sourceCode" id="cb1"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Complete restoration to a previous snapshot state for comprehensive rollback</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">FULL_RESTORE</span><span class="op">(</span><span class="st">&quot;Full restoration to previous state&quot;</span><span class="op">),</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Restore only instance state without affecting bytecode for targeted restoration</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">INSTANCE_STATE_RESTORE</span><span class="op">(</span><span class="st">&quot;Instance state restoration&quot;</span><span class="op">),</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Restore bytecode to previous version for code<span class="co">-</span>level rollback</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">BYTECODE_RESTORE</span><span class="op">(</span><span class="st">&quot;Bytecode restoration&quot;</span><span class="op">),</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Restore class metadata and structure for structural rollback</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">METADATA_RESTORE</span><span class="op">(</span><span class="st">&quot;Class metadata restoration&quot;</span><span class="op">),</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Partial rollback of specific changes for selective restoration</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">PARTIAL_RESTORE</span><span class="op">(</span><span class="st">&quot;Partial state restoration&quot;</span><span class="op">),</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Cascading rollback across multiple related classes for comprehensive coordination</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="fu">CASCADING_RESTORE</span><span class="op">(</span><span class="st">&quot;Cascading restoration across related classes&quot;</span><span class="op">);</span></span></code></pre></div>
<h2 id="operation-description-and-identity-management">Operation
Description and Identity Management</h2>
<div class="sourceCode" id="cb2"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Human<span class="co">-</span>readable description of the rollback operation for operation understanding</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates a new rollback operation with comprehensive description</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">description</span><span class="co"> </span>human<span class="co">-</span>readable description for operation documentation and understanding</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">RollbackOperation</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> description<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the human<span class="co">-</span>readable description of this rollback operation</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> description of the operation with comprehensive explanation</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">@Override</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">toString</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="operation-intelligence-and-impact-analysis-operations">Operation
Intelligence and Impact Analysis Operations</h1>
<h2 id="instance-state-impact-and-restoration-scope-analysis">Instance
State Impact and Restoration Scope Analysis</h2>
<div class="sourceCode" id="cb3"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns whether this operation affects instance state for impact analysis</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if instance state is affected during operation execution</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">affectsInstanceState</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> FULL_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> INSTANCE_STATE_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> PARTIAL_RESTORE<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="bytecode-impact-and-code-restoration-analysis">Bytecode Impact
and Code Restoration Analysis</h2>
<div class="sourceCode" id="cb4"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns whether this operation affects bytecode for code impact analysis</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if bytecode is affected during operation execution</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">affectsBytecode</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> FULL_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> BYTECODE_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> PARTIAL_RESTORE<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2
id="complexity-assessment-and-resource-requirement-analysis">Complexity
Assessment and Resource Requirement Analysis</h2>
<div class="sourceCode" id="cb5"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns whether this operation is complex and involves multiple components</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if operation is complex and requires advanced coordination</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isComplex</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> FULL_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> CASCADING_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> PARTIAL_RESTORE<span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2
id="enhanced-operation-intelligence-and-advanced-analysis-operations">Enhanced
Operation Intelligence and Advanced Analysis Operations</h2>
<div class="sourceCode" id="cb6"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns whether this operation affects class metadata and structure</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if metadata is affected during operation execution</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">affectsMetadata</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> FULL_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> METADATA_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> PARTIAL_RESTORE<span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns whether this operation requires multiple classes coordination</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if operation involves multiple classes and cascading effects</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">requiresMultiClassCoordination</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> CASCADING_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> FULL_RESTORE<span class="op">;</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Returns whether this operation is atomic and can be executed independently</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> true if operation can be executed without dependencies</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isAtomic</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> INSTANCE_STATE_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> BYTECODE_RESTORE <span class="op">||</span> <span class="kw">this</span> <span class="op">==</span> METADATA_RESTORE<span class="op">;</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the risk level associated with this operation for risk assessment</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> risk level from LOW to HIGH for operation planning</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> RollbackOperationRisk <span class="fu">getRiskLevel</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span><span class="kw">this</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">:</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> METADATA_RESTORE<span class="op">:</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationRisk<span class="op">.</span><span class="fu">LOW</span><span class="op">;</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE<span class="op">:</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE<span class="op">:</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationRisk<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE<span class="op">:</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE<span class="op">:</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationRisk<span class="op">.</span><span class="fu">HIGH</span><span class="op">;</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>        <span class="kw">default</span><span class="op">:</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationRisk<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the complexity level of executing this operation</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> complexity level for operation execution planning</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> RollbackOperationComplexity <span class="fu">getComplexityLevel</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span><span class="kw">this</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">:</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE<span class="op">:</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> METADATA_RESTORE<span class="op">:</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationComplexity<span class="op">.</span><span class="fu">LOW</span><span class="op">;</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE<span class="op">:</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationComplexity<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE<span class="op">:</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE<span class="op">:</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationComplexity<span class="op">.</span><span class="fu">HIGH</span><span class="op">;</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>        <span class="kw">default</span><span class="op">:</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationComplexity<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the expected performance impact of this operation</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> performance impact assessment for operation execution</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> RollbackOperationPerformance <span class="fu">getPerformanceImpact</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span><span class="kw">this</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">:</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> METADATA_RESTORE<span class="op">:</span></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationPerformance<span class="op">.</span><span class="fu">FAST</span><span class="op">;</span></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE<span class="op">:</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE<span class="op">:</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationPerformance<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE<span class="op">:</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE<span class="op">:</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationPerformance<span class="op">.</span><span class="fu">SLOW</span><span class="op">;</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>        <span class="kw">default</span><span class="op">:</span></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationPerformance<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the scope of impact for this operation</span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> impact scope for operation planning and coordination</span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> RollbackOperationScope <span class="fu">getImpactScope</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span><span class="kw">this</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">:</span></span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE<span class="op">:</span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> METADATA_RESTORE<span class="op">:</span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationScope<span class="op">.</span><span class="fu">SINGLE_CLASS</span><span class="op">;</span></span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE<span class="op">:</span></span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationScope<span class="op">.</span><span class="fu">SELECTIVE_COMPONENTS</span><span class="op">;</span></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE<span class="op">:</span></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationScope<span class="op">.</span><span class="fu">COMPLETE_STATE</span><span class="op">;</span></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE<span class="op">:</span></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationScope<span class="op">.</span><span class="fu">MULTIPLE_CLASSES</span><span class="op">;</span></span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>        <span class="kw">default</span><span class="op">:</span></span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RollbackOperationScope<span class="op">.</span><span class="fu">SINGLE_CLASS</span><span class="op">;</span></span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Determines if this operation is compatible with another operation for composition</span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">other</span><span class="co"> </span>the other operation for compatibility analysis</span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> true if operations can be combined or executed together</span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isCompatibleWith</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> RollbackOperation other<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for conflicting operations</span></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="kw">this</span> <span class="op">==</span> FULL_RESTORE <span class="op">||</span> other <span class="op">==</span> FULL_RESTORE<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> other<span class="op">;</span> <span class="co">// Full restore conflicts with other partial operations</span></span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check for complementary operations</span></span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span><span class="kw">this</span> <span class="op">==</span> INSTANCE_STATE_RESTORE <span class="op">&amp;&amp;</span> other <span class="op">==</span> BYTECODE_RESTORE<span class="op">)</span> <span class="op">||</span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">(</span><span class="kw">this</span> <span class="op">==</span> BYTECODE_RESTORE <span class="op">&amp;&amp;</span> other <span class="op">==</span> INSTANCE_STATE_RESTORE<span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span> <span class="co">// These can be combined</span></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Cascading operations conflict with others</span></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="kw">this</span> <span class="op">==</span> CASCADING_RESTORE <span class="op">||</span> other <span class="op">==</span> CASCADING_RESTORE<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span> <span class="op">==</span> other<span class="op">;</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span> <span class="co">// Most operations are compatible</span></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets required resources for executing this operation</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> list of required resources for operation planning</span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> <span class="fu">getRequiredResources</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>    java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> resources <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="fu">affectsInstanceState</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Instance state snapshots&quot;</span><span class="op">);</span></span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Memory for instance restoration&quot;</span><span class="op">);</span></span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="fu">affectsBytecode</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Bytecode snapshots&quot;</span><span class="op">);</span></span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Class loader coordination&quot;</span><span class="op">);</span></span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="fu">affectsMetadata</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Metadata snapshots&quot;</span><span class="op">);</span></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Class structure validation&quot;</span><span class="op">);</span></span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="fu">requiresMultiClassCoordination</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Inter-class dependency mapping&quot;</span><span class="op">);</span></span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a>        resources<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Coordination synchronization&quot;</span><span class="op">);</span></span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> resources<span class="op">;</span></span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets prerequisites that must be satisfied before executing this operation</span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> list of prerequisites for operation validation</span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> <span class="fu">getPrerequisites</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a>    java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> prerequisites <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span><span class="kw">this</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE<span class="op">:</span></span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Complete snapshot available&quot;</span><span class="op">);</span></span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;All dependent classes identified&quot;</span><span class="op">);</span></span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Resource locks acquired&quot;</span><span class="op">);</span></span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">:</span></span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Instance state snapshot available&quot;</span><span class="op">);</span></span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Instance references validated&quot;</span><span class="op">);</span></span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE<span class="op">:</span></span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Bytecode snapshot available&quot;</span><span class="op">);</span></span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Class loader compatibility verified&quot;</span><span class="op">);</span></span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> METADATA_RESTORE<span class="op">:</span></span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Metadata snapshot available&quot;</span><span class="op">);</span></span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Structure compatibility verified&quot;</span><span class="op">);</span></span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE<span class="op">:</span></span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Selective snapshots available&quot;</span><span class="op">);</span></span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Restoration scope defined&quot;</span><span class="op">);</span></span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE<span class="op">:</span></span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Dependency graph available&quot;</span><span class="op">);</span></span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;All related classes accessible&quot;</span><span class="op">);</span></span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a>            prerequisites<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Coordination locks acquired&quot;</span><span class="op">);</span></span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> prerequisites<span class="op">;</span></span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates an operation recommendation based on rollback requirements</span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">requirements</span><span class="co"> </span>the rollback requirements for operation recommendation</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> recommended operation with reasoning</span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> OperationRecommendation <span class="fu">recommendOperation</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> RollbackRequirements requirements<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a>    RollbackOperation recommended<span class="op">;</span></span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> reasoning<span class="op">;</span></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">requiresCompleteRestoration</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a>        recommended <span class="op">=</span> FULL_RESTORE<span class="op">;</span></span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a>        reasoning <span class="op">=</span> <span class="st">&quot;Complete restoration required for comprehensive rollback&quot;</span><span class="op">;</span></span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">requiresMultiClassCoordination</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a>        recommended <span class="op">=</span> CASCADING_RESTORE<span class="op">;</span></span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a>        reasoning <span class="op">=</span> <span class="st">&quot;Multiple classes affected, cascading restore needed&quot;</span><span class="op">;</span></span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">isInstanceStateOnly</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>        recommended <span class="op">=</span> INSTANCE_STATE_RESTORE<span class="op">;</span></span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a>        reasoning <span class="op">=</span> <span class="st">&quot;Only instance state needs restoration&quot;</span><span class="op">;</span></span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">isBytecodeOnly</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a>        recommended <span class="op">=</span> BYTECODE_RESTORE<span class="op">;</span></span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a>        reasoning <span class="op">=</span> <span class="st">&quot;Only bytecode needs restoration&quot;</span><span class="op">;</span></span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">isMetadataOnly</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>        recommended <span class="op">=</span> METADATA_RESTORE<span class="op">;</span></span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>        reasoning <span class="op">=</span> <span class="st">&quot;Only metadata needs restoration&quot;</span><span class="op">;</span></span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>        recommended <span class="op">=</span> PARTIAL_RESTORE<span class="op">;</span></span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>        reasoning <span class="op">=</span> <span class="st">&quot;Selective restoration based on specific requirements&quot;</span><span class="op">;</span></span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> OperationRecommendation<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">operation</span><span class="op">(</span>recommended<span class="op">)</span></span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">reasoning</span><span class="op">(</span>reasoning<span class="op">)</span></span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">confidence</span><span class="op">(</span><span class="fu">calculateConfidence</span><span class="op">(</span>requirements<span class="op">,</span> recommended<span class="op">))</span></span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">alternativeOperations</span><span class="op">(</span><span class="fu">getAlternativeOperations</span><span class="op">(</span>recommended<span class="op">))</span></span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">estimatedDuration</span><span class="op">(</span><span class="fu">estimateExecutionTime</span><span class="op">(</span>recommended<span class="op">,</span> requirements<span class="op">))</span></span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Calculates confidence level for operation recommendation</span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">requirements</span><span class="co"> </span>the rollback requirements for confidence calculation</span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">operation</span><span class="co"> </span>the recommended operation for confidence assessment</span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> confidence level from <span class="co">0.0</span> to <span class="co">1.0</span></span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">double</span> <span class="fu">calculateConfidence</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> RollbackRequirements requirements<span class="op">,</span></span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">@NonNull</span> <span class="dt">final</span> RollbackOperation operation<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> confidence <span class="op">=</span> <span class="fl">0.5</span><span class="op">;</span> <span class="co">// Base confidence</span></span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">hasCompleteSnapshots</span><span class="op">()</span> <span class="op">&amp;&amp;</span> operation<span class="op">.</span><span class="fu">isComplex</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>        confidence <span class="op">+=</span> <span class="fl">0.3</span><span class="op">;</span></span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-259"><a href="#cb6-259" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">isLowRisk</span><span class="op">()</span> <span class="op">&amp;&amp;</span> operation<span class="op">.</span><span class="fu">getRiskLevel</span><span class="op">()</span> <span class="op">==</span> RollbackOperationRisk<span class="op">.</span><span class="fu">LOW</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-260"><a href="#cb6-260" aria-hidden="true" tabindex="-1"></a>        confidence <span class="op">+=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-262"><a href="#cb6-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-263"><a href="#cb6-263" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">requiresFastExecution</span><span class="op">()</span> <span class="op">&amp;&amp;</span> operation<span class="op">.</span><span class="fu">getPerformanceImpact</span><span class="op">()</span> <span class="op">==</span> RollbackOperationPerformance<span class="op">.</span><span class="fu">FAST</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a>        confidence <span class="op">+=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span><span class="fl">0.0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span><span class="op">(</span><span class="fl">1.0</span><span class="op">,</span> confidence<span class="op">));</span></span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets alternative operations for the given operation</span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">operation</span><span class="co"> </span>the primary operation for alternative analysis</span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> list of alternative operations</span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-275"><a href="#cb6-275" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-276"><a href="#cb6-276" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span>RollbackOperation<span class="op">&gt;</span> <span class="fu">getAlternativeOperations</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> RollbackOperation operation<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-277"><a href="#cb6-277" aria-hidden="true" tabindex="-1"></a>    java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span>RollbackOperation<span class="op">&gt;</span> alternatives <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb6-278"><a href="#cb6-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-279"><a href="#cb6-279" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>operation<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-280"><a href="#cb6-280" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE<span class="op">:</span></span>
<span id="cb6-281"><a href="#cb6-281" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>PARTIAL_RESTORE<span class="op">);</span></span>
<span id="cb6-282"><a href="#cb6-282" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>CASCADING_RESTORE<span class="op">);</span></span>
<span id="cb6-283"><a href="#cb6-283" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-284"><a href="#cb6-284" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">:</span></span>
<span id="cb6-285"><a href="#cb6-285" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>PARTIAL_RESTORE<span class="op">);</span></span>
<span id="cb6-286"><a href="#cb6-286" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>FULL_RESTORE<span class="op">);</span></span>
<span id="cb6-287"><a href="#cb6-287" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-288"><a href="#cb6-288" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE<span class="op">:</span></span>
<span id="cb6-289"><a href="#cb6-289" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>PARTIAL_RESTORE<span class="op">);</span></span>
<span id="cb6-290"><a href="#cb6-290" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>FULL_RESTORE<span class="op">);</span></span>
<span id="cb6-291"><a href="#cb6-291" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-292"><a href="#cb6-292" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> METADATA_RESTORE<span class="op">:</span></span>
<span id="cb6-293"><a href="#cb6-293" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>PARTIAL_RESTORE<span class="op">);</span></span>
<span id="cb6-294"><a href="#cb6-294" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>FULL_RESTORE<span class="op">);</span></span>
<span id="cb6-295"><a href="#cb6-295" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-296"><a href="#cb6-296" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE<span class="op">:</span></span>
<span id="cb6-297"><a href="#cb6-297" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>FULL_RESTORE<span class="op">);</span></span>
<span id="cb6-298"><a href="#cb6-298" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-299"><a href="#cb6-299" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE<span class="op">:</span></span>
<span id="cb6-300"><a href="#cb6-300" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>FULL_RESTORE<span class="op">);</span></span>
<span id="cb6-301"><a href="#cb6-301" aria-hidden="true" tabindex="-1"></a>            alternatives<span class="op">.</span><span class="fu">add</span><span class="op">(</span>PARTIAL_RESTORE<span class="op">);</span></span>
<span id="cb6-302"><a href="#cb6-302" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb6-303"><a href="#cb6-303" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-304"><a href="#cb6-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-305"><a href="#cb6-305" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> alternatives<span class="op">;</span></span>
<span id="cb6-306"><a href="#cb6-306" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-308"><a href="#cb6-308" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-309"><a href="#cb6-309" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Estimates execution time for the operation based on requirements</span>
<span id="cb6-310"><a href="#cb6-310" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">operation</span><span class="co"> </span>the operation for time estimation</span>
<span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">requirements</span><span class="co"> </span>the requirements affecting execution time</span>
<span id="cb6-312"><a href="#cb6-312" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> estimated execution duration</span>
<span id="cb6-313"><a href="#cb6-313" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-314"><a href="#cb6-314" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb6-315"><a href="#cb6-315" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> java<span class="op">.</span><span class="fu">time</span><span class="op">.</span><span class="fu">Duration</span> <span class="fu">estimateExecutionTime</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> RollbackOperation operation<span class="op">,</span></span>
<span id="cb6-316"><a href="#cb6-316" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">@NonNull</span> <span class="dt">final</span> RollbackRequirements requirements<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-317"><a href="#cb6-317" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> baseMillis <span class="op">=</span> <span class="cf">switch</span> <span class="op">(</span>operation<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-318"><a href="#cb6-318" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> INSTANCE_STATE_RESTORE<span class="op">,</span> METADATA_RESTORE <span class="op">-&gt;</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> BYTECODE_RESTORE <span class="op">-&gt;</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> PARTIAL_RESTORE <span class="op">-&gt;</span> <span class="dv">300</span><span class="op">;</span></span>
<span id="cb6-321"><a href="#cb6-321" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> FULL_RESTORE <span class="op">-&gt;</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb6-322"><a href="#cb6-322" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CASCADING_RESTORE <span class="op">-&gt;</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb6-323"><a href="#cb6-323" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb6-324"><a href="#cb6-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-325"><a href="#cb6-325" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Adjust based on requirements</span></span>
<span id="cb6-326"><a href="#cb6-326" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>requirements<span class="op">.</span><span class="fu">getComplexityFactor</span><span class="op">()</span> <span class="op">&gt;</span> <span class="fl">1.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-327"><a href="#cb6-327" aria-hidden="true" tabindex="-1"></a>        baseMillis <span class="op">*=</span> requirements<span class="op">.</span><span class="fu">getComplexityFactor</span><span class="op">();</span></span>
<span id="cb6-328"><a href="#cb6-328" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-329"><a href="#cb6-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-330"><a href="#cb6-330" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> java<span class="op">.</span><span class="fu">time</span><span class="op">.</span><span class="fu">Duration</span><span class="op">.</span><span class="fu">ofMillis</span><span class="op">(</span>baseMillis<span class="op">);</span></span>
<span id="cb6-331"><a href="#cb6-331" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="operation-analytics-and-assessment-value-objects">Operation
Analytics and Assessment Value Objects</h2>
<div class="sourceCode" id="cb7"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/RollbackOperation.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Risk levels for rollback operations</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">enum</span> RollbackOperationRisk <span class="op">{</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">LOW</span><span class="op">(</span><span class="st">&quot;Minimal risk of side effects or failures&quot;</span><span class="op">),</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MEDIUM</span><span class="op">(</span><span class="st">&quot;Moderate risk requiring careful planning&quot;</span><span class="op">),</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HIGH</span><span class="op">(</span><span class="st">&quot;High risk of complex side effects or failures&quot;</span><span class="op">);</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">RollbackOperationRisk</span><span class="op">(</span><span class="bu">String</span> description<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Complexity levels for rollback operation execution</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">enum</span> RollbackOperationComplexity <span class="op">{</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">LOW</span><span class="op">(</span><span class="st">&quot;Simple operation with straightforward execution&quot;</span><span class="op">),</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MEDIUM</span><span class="op">(</span><span class="st">&quot;Moderate complexity requiring coordination&quot;</span><span class="op">),</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HIGH</span><span class="op">(</span><span class="st">&quot;Complex operation requiring sophisticated orchestration&quot;</span><span class="op">);</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">RollbackOperationComplexity</span><span class="op">(</span><span class="bu">String</span> description<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Performance impact levels for rollback operations</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">enum</span> RollbackOperationPerformance <span class="op">{</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">FAST</span><span class="op">(</span><span class="st">&quot;Minimal performance impact&quot;</span><span class="op">),</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MEDIUM</span><span class="op">(</span><span class="st">&quot;Moderate performance impact&quot;</span><span class="op">),</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">SLOW</span><span class="op">(</span><span class="st">&quot;Significant performance impact&quot;</span><span class="op">);</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">RollbackOperationPerformance</span><span class="op">(</span><span class="bu">String</span> description<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Scope of impact for rollback operations</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">enum</span> RollbackOperationScope <span class="op">{</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">SINGLE_CLASS</span><span class="op">(</span><span class="st">&quot;Affects only one class&quot;</span><span class="op">),</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">SELECTIVE_COMPONENTS</span><span class="op">(</span><span class="st">&quot;Affects specific components&quot;</span><span class="op">),</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COMPLETE_STATE</span><span class="op">(</span><span class="st">&quot;Affects complete state&quot;</span><span class="op">),</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MULTIPLE_CLASSES</span><span class="op">(</span><span class="st">&quot;Affects multiple related classes&quot;</span><span class="op">);</span></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">RollbackOperationScope</span><span class="op">(</span><span class="bu">String</span> description<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Operation recommendation with analysis and alternatives</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">Builder</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">EqualsAndHashCode</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">ToString</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">Getter</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> OperationRecommendation <span class="op">{</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Recommended rollback operation</span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> RollbackOperation operation<span class="op">;</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Reasoning for the recommendation</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> reasoning<span class="op">;</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Confidence level <span class="co">(0.0</span> to <span class="co">1.0)</span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">double</span> confidence<span class="op">;</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Alternative operations to consider</span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span>RollbackOperation<span class="op">&gt;</span> alternativeOperations<span class="op">;</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Estimated execution duration</span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> java<span class="op">.</span><span class="fu">time</span><span class="op">.</span><span class="fu">Duration</span> estimatedDuration<span class="op">;</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Rollback requirements for operation recommendation</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">Builder</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">EqualsAndHashCode</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">ToString</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">Getter</span></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> RollbackRequirements <span class="op">{</span></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether complete restoration is required</span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> requiresCompleteRestoration<span class="op">;</span></span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether multi<span class="co">-</span>class coordination is needed</span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> requiresMultiClassCoordination<span class="op">;</span></span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether only instance state restoration is needed</span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> isInstanceStateOnly<span class="op">;</span></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether only bytecode restoration is needed</span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> isBytecodeOnly<span class="op">;</span></span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether only metadata restoration is needed</span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> isMetadataOnly<span class="op">;</span></span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether complete snapshots are available</span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> hasCompleteSnapshots<span class="op">;</span></span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether this is a low<span class="co">-</span>risk operation</span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> isLowRisk<span class="op">;</span></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether fast execution is required</span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> requiresFastExecution<span class="op">;</span></span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Complexity factor affecting execution time</span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">double</span> complexityFactor<span class="op">;</span></span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="testing-and-validation-strategies">Testing and Validation
Strategies</h1>
<h2 id="operation-classification-testing">Operation Classification
Testing</h2>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldClassifyOperationsCorrectly</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Different rollback operations</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    RollbackOperation fullRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">FULL_RESTORE</span><span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    RollbackOperation instanceRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">INSTANCE_STATE_RESTORE</span><span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    RollbackOperation bytecodeRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">BYTECODE_RESTORE</span><span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    RollbackOperation cascadingRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">CASCADING_RESTORE</span><span class="op">;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Analyzing operation characteristics</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>fullRestore<span class="op">.</span><span class="fu">affectsInstanceState</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>fullRestore<span class="op">.</span><span class="fu">affectsBytecode</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>fullRestore<span class="op">.</span><span class="fu">isComplex</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>instanceRestore<span class="op">.</span><span class="fu">affectsInstanceState</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>instanceRestore<span class="op">.</span><span class="fu">affectsBytecode</span><span class="op">()).</span><span class="fu">isFalse</span><span class="op">();</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>instanceRestore<span class="op">.</span><span class="fu">isAtomic</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Should provide accurate classification</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>fullRestore<span class="op">.</span><span class="fu">getRiskLevel</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>RollbackOperationRisk<span class="op">.</span><span class="fu">HIGH</span><span class="op">);</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>instanceRestore<span class="op">.</span><span class="fu">getRiskLevel</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>RollbackOperationRisk<span class="op">.</span><span class="fu">LOW</span><span class="op">);</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>cascadingRestore<span class="op">.</span><span class="fu">requiresMultiClassCoordination</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="operation-compatibility-testing">Operation Compatibility
Testing</h2>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldAnalyzeOperationCompatibility</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Various operation combinations</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    RollbackOperation instanceRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">INSTANCE_STATE_RESTORE</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    RollbackOperation bytecodeRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">BYTECODE_RESTORE</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    RollbackOperation fullRestore <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">FULL_RESTORE</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Testing compatibility</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>instanceRestore<span class="op">.</span><span class="fu">isCompatibleWith</span><span class="op">(</span>bytecodeRestore<span class="op">)).</span><span class="fu">isTrue</span><span class="op">();</span> <span class="co">// Complementary</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>fullRestore<span class="op">.</span><span class="fu">isCompatibleWith</span><span class="op">(</span>instanceRestore<span class="op">)).</span><span class="fu">isFalse</span><span class="op">();</span> <span class="co">// Conflicting</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>instanceRestore<span class="op">.</span><span class="fu">isCompatibleWith</span><span class="op">(</span>instanceRestore<span class="op">)).</span><span class="fu">isTrue</span><span class="op">();</span> <span class="co">// Self-compatible</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="operation-recommendation-testing">Operation Recommendation
Testing</h2>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldRecommendAppropriateOperations</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Different rollback scenarios</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    RollbackRequirements simpleReq <span class="op">=</span> RollbackRequirements<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">isInstanceStateOnly</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">isLowRisk</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">requiresFastExecution</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    RollbackRequirements complexReq <span class="op">=</span> RollbackRequirements<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">requiresCompleteRestoration</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">requiresMultiClassCoordination</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">hasCompleteSnapshots</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Getting recommendations</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    OperationRecommendation simpleRec <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">recommendOperation</span><span class="op">(</span>simpleReq<span class="op">);</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    OperationRecommendation complexRec <span class="op">=</span> RollbackOperation<span class="op">.</span><span class="fu">recommendOperation</span><span class="op">(</span>complexReq<span class="op">);</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Should recommend appropriate operations</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>simpleRec<span class="op">.</span><span class="fu">getOperation</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>RollbackOperation<span class="op">.</span><span class="fu">INSTANCE_STATE_RESTORE</span><span class="op">);</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>complexRec<span class="op">.</span><span class="fu">getOperation</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>RollbackOperation<span class="op">.</span><span class="fu">FULL_RESTORE</span><span class="op">);</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>simpleRec<span class="op">.</span><span class="fu">getConfidence</span><span class="op">()).</span><span class="fu">isGreaterThan</span><span class="op">(</span><span class="fl">0.5</span><span class="op">);</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="related-documentation">Related Documentation</h1>
<ul>
<li><span class="spurious-link"
target="CleanupResult.org"><em>CleanupResult</em></span>: Results from
rollback cleanup operations</li>
<li><span class="spurious-link"
target="ConflictResolutionStrategy.org"><em>ConflictResolutionStrategy</em></span>:
Strategies for resolving rollback conflicts</li>
<li><span class="spurious-link"
target="RollbackManager.org"><em>RollbackManager</em></span>: Manager
coordinating rollback operations</li>
<li><span class="spurious-link"
target="SnapshotManager.org"><em>SnapshotManager</em></span>: Manager
providing snapshots for rollback</li>
<li><a href="../flows/rollback-execution-flow.org">Rollback Execution
Flow</a>: Flow orchestrating rollback operations</li>
</ul>
<h1 id="implementation-notes">Implementation Notes</h1>
<h2 id="design-patterns-applied">Design Patterns Applied</h2>
<p>The enumeration leverages several sophisticated design patterns:</p>
<ul>
<li><strong><strong>Strategy Pattern</strong></strong>: Different
rollback operation strategies with behavioral intelligence</li>
<li><strong><strong>Factory Method Pattern</strong></strong>: Operation
recommendation based on rollback requirements</li>
<li><strong><strong>State Pattern</strong></strong>: Operation state
analysis and impact assessment</li>
<li><strong><strong>Template Method Pattern</strong></strong>: Common
operation analysis with specialized behavior</li>
</ul>
<h2 id="domain-driven-design-principles">Domain-Driven Design
Principles</h2>
<p>The implementation follows strict DDD principles:</p>
<ul>
<li><strong><strong>Rich Enumerations</strong></strong>: Comprehensive
behavior and intelligence beyond simple constants</li>
<li><strong><strong>Domain Intelligence</strong></strong>: Built-in
domain intelligence for operation analysis and recommendation</li>
<li><strong><strong>Infrastructure Independence</strong></strong>: Pure
domain logic without infrastructure technology dependencies</li>
<li><strong><strong>Ubiquitous Language</strong></strong>: Clear,
business-focused naming and comprehensive documentation</li>
</ul>
<h2 id="future-enhancement-opportunities">Future Enhancement
Opportunities</h2>
<p>The design supports future enhancements:</p>
<ul>
<li><strong><strong>Machine Learning Operations</strong></strong>:
AI-driven rollback operation optimization and recommendation</li>
<li><strong><strong>Dynamic Operation Selection</strong></strong>:
Runtime operation adaptation based on system state</li>
<li><strong><strong>Advanced Rollback Orchestration</strong></strong>:
Sophisticated rollback workflow coordination and optimization</li>
<li><strong><strong>Enterprise Rollback Policies</strong></strong>:
Enterprise-grade rollback policies and compliance management</li>
</ul>
<p>The RollbackOperation enumeration provides ByteHot's essential
intelligent rollback operation classification foundation while
maintaining comprehensive operation intelligence capabilities,
sophisticated execution strategies, and extensibility for advanced
rollback coordination scenarios throughout the entire intelligent
hot-swap system lifecycle.</p>
</main>
<div class="footer">
    ByteHot - Revolutionary JVM Hot-Swapping | 
    <a href="https://github.com/rydnr/bytehot">GitHub</a> | 
    <a href="https://rydnr.github.io/bytehot/docs/">Documentation</a> | 
    <a href="https://rydnr.github.io/bytehot/javadocs/">API Docs</a>
</div>
</body></html>
