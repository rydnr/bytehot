<!DOCTYPE html>
<html>
<head>
    <title>EventSnapshotGenerator - ByteHot Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="navigation">
    <a href="../index.html">üè† Home</a>
    <a href="../implementation.html">üèóÔ∏è Implementation</a>
    <a href="../journal.html">üìî Journal</a>
    <a href="../docs/">üìö Docs</a>
    <a href="../javadocs/">üìñ Javadocs</a>
    <a href="https://github.com/rydnr/bytehot">üîó GitHub</a>
</div>
<main>
<h1 id="overview">Overview</h1>
<p>The <code>EventSnapshotGenerator</code> class serves as ByteHot's
sophisticated intelligent event snapshot generation and debugging
context service, providing comprehensive snapshot creation, advanced
error context capture, and intelligent debugging coordination for
precise error analysis and automated debugging intelligence. This
critical domain service encapsulates snapshot generation logic, causal
analysis mechanisms, and sophisticated context capture that enable
precise debugging support and automated error correlation. As the
debugging foundation for ByteHot's error management system, it enables
comprehensive error context while maintaining clean domain boundaries
and supporting advanced debugging analytics, snapshot intelligence, and
operational coordination throughout the entire intelligent hot-swap
system lifecycle.</p>
<h1 id="domain-architecture-role">Domain Architecture Role</h1>
<h2
id="intelligent-snapshot-generation-and-debugging-context-foundation">Intelligent
Snapshot Generation and Debugging Context Foundation</h2>
<p>EventSnapshotGenerator serves as the comprehensive intelligent
snapshot generation and debugging context foundation:</p>
<ul>
<li>Provides sophisticated snapshot generation for error analysis and
debugging coordination</li>
<li>Enables comprehensive debugging context capture and error
correlation through advanced snapshot intelligence</li>
<li>Supports intelligent debugging coordination and error analysis
through domain-driven snapshot patterns</li>
<li>Acts as the authoritative foundation for snapshot generation
operations and debugging-driven coordination</li>
</ul>
<h2 id="domain-service-design-and-snapshot-intelligence-hub">Domain
Service Design and Snapshot Intelligence Hub</h2>
<p>The class serves as the domain service design and snapshot
intelligence hub:</p>
<ul>
<li>Implements sophisticated domain service patterns with configurable
snapshot generation and context capture</li>
<li>Provides comprehensive snapshot validation and consistency through
domain-driven design principles</li>
<li>Enables snapshot composition and correlation capabilities for
complex debugging scenarios</li>
<li>Supports snapshot optimization and performance enhancement through
efficient generation patterns</li>
</ul>
<h2 id="error-analysis-intelligence-and-automated-debugging-hub">Error
Analysis Intelligence and Automated Debugging Hub</h2>
<p>The implementation provides error analysis intelligence and automated
debugging capabilities:</p>
<ul>
<li>Enables sophisticated error analysis intelligence through
comprehensive snapshot generation and causal analysis</li>
<li>Supports advanced automated debugging and error correlation through
snapshot-driven coordination</li>
<li>Provides foundation for debugging analytics and operational
intelligence through snapshot-driven correlation</li>
<li>Enables intelligent error monitoring and optimization through
snapshot-driven analysis and assessment</li>
</ul>
<h1
id="event-snapshot-generator-structure-and-configuration-management">Event
Snapshot Generator Structure and Configuration Management</h1>
<h2 id="core-configuration-and-snapshot-management-context">Core
Configuration and Snapshot Management Context</h2>
<div class="sourceCode" id="cb1"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Current configuration for snapshot generation with comprehensive settings</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">final</span> SnapshotConfig config<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Singleton instance for global snapshot generation access</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> EventSnapshotGenerator instance<span class="op">;</span></span></code></pre></div>
<h2 id="snapshot-configuration-and-generation-settings">Snapshot
Configuration and Generation Settings</h2>
<div class="sourceCode" id="cb2"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Configuration for snapshot generation with advanced settings and intelligence</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">@Builder</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">@Getter</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> SnapshotConfig <span class="op">{</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Maximum number of events to include in snapshot for performance optimization</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Builder</span><span class="op">.</span><span class="fu">Default</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">int</span> maxEvents <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Maximum time window to look back for events for context relevance</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Builder</span><span class="op">.</span><span class="fu">Default</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">Duration</span> maxTimeWindow <span class="op">=</span> <span class="bu">Duration</span><span class="op">.</span><span class="fu">ofMinutes</span><span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether to include causal analysis for advanced debugging intelligence</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Builder</span><span class="op">.</span><span class="fu">Default</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> includeCausalAnalysis <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether to include performance metrics for system analysis</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Builder</span><span class="op">.</span><span class="fu">Default</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> includePerformanceMetrics <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Custom event filter <span class="co">(</span>null means no filtering<span class="co">)</span> for selective snapshot generation</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Nullable</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">Predicate</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> eventFilter<span class="op">;</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Minimum confidence level for causal analysis for quality assurance</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Builder</span><span class="op">.</span><span class="fu">Default</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">double</span> minCausalConfidence <span class="op">=</span> <span class="fl">0.3</span><span class="op">;</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Default configuration for snapshot generation with balanced settings</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> SnapshotConfig DEFAULT_CONFIG <span class="op">=</span> SnapshotConfig<span class="op">.</span><span class="fu">builder</span><span class="op">().</span><span class="fu">build</span><span class="op">();</span></span></code></pre></div>
<h2 id="core-construction-and-singleton-management-operations">Core
Construction and Singleton Management Operations</h2>
<div class="sourceCode" id="cb3"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates a new generator with the specified configuration</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">config</span><span class="co"> </span>snapshot generation configuration for customized behavior</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">EventSnapshotGenerator</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> SnapshotConfig config<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">config</span> <span class="op">=</span> config<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the singleton instance with default configuration for standard operations</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> singleton instance with thread<span class="co">-</span>safe initialization</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> EventSnapshotGenerator <span class="fu">getInstance</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>instance <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">synchronized</span> <span class="op">(</span>EventSnapshotGenerator<span class="op">.</span><span class="fu">class</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>instance <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>                instance <span class="op">=</span> <span class="kw">new</span> <span class="fu">EventSnapshotGenerator</span><span class="op">(</span>DEFAULT_CONFIG<span class="op">);</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> instance<span class="op">;</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates a new instance with custom configuration for specialized snapshot generation</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">config</span><span class="co"> </span>custom configuration for tailored snapshot behavior</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> configured generator instance with custom settings</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> EventSnapshotGenerator <span class="fu">withConfig</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> SnapshotConfig config<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="fu">EventSnapshotGenerator</span><span class="op">(</span>config<span class="op">);</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="snapshot-generation-and-context-capture-operations">Snapshot
Generation and Context Capture Operations</h1>
<h2 id="primary-snapshot-generation-and-error-context-capture">Primary
Snapshot Generation and Error Context Capture</h2>
<div class="sourceCode" id="cb4"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Generates a complete event snapshot for the current error context</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> comprehensive event snapshot with error context and causal analysis</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> EventSnapshot <span class="fu">generateSnapshot</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">generateSnapshot</span><span class="op">(</span><span class="kw">null</span><span class="op">);</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Generates an event snapshot with optional additional context for enhanced debugging</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">additionalContext</span><span class="co"> </span>extra context to include for specialized snapshot generation</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> comprehensive event snapshot with enriched context and analysis</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> EventSnapshot <span class="fu">generateSnapshot</span><span class="op">(</span><span class="at">@Nullable</span> <span class="dt">final</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> additionalContext<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Capture current error context</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        ErrorContext errorContext <span class="op">=</span> ErrorContext<span class="op">.</span><span class="fu">capture</span><span class="op">();</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Get event store</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        EventStorePort eventStore <span class="op">=</span> Ports<span class="op">.</span><span class="fu">resolve</span><span class="op">(</span>EventStorePort<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Calculate time window for event retrieval</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>        Instant cutoffTime <span class="op">=</span> errorContext<span class="op">.</span><span class="fu">getCapturedAt</span><span class="op">().</span><span class="fu">minus</span><span class="op">(</span>config<span class="op">.</span><span class="fu">getMaxTimeWindow</span><span class="op">());</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Retrieve relevant events</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> recentEvents <span class="op">=</span> eventStore<span class="op">.</span><span class="fu">getEventsBetween</span><span class="op">(</span>cutoffTime<span class="op">,</span> errorContext<span class="op">.</span><span class="fu">getCapturedAt</span><span class="op">());</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Apply filtering if configured</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>        <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> filteredEvents <span class="op">=</span> <span class="fu">filterEvents</span><span class="op">(</span>recentEvents<span class="op">);</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Limit to max events (keep most recent)</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> limitedEvents <span class="op">=</span> <span class="fu">limitEvents</span><span class="op">(</span>filteredEvents<span class="op">);</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Generate causal analysis if enabled</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>        CausalChain causalChain <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>config<span class="op">.</span><span class="fu">isIncludeCausalAnalysis</span><span class="op">()</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>limitedEvents<span class="op">.</span><span class="fu">isEmpty</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>            causalChain <span class="op">=</span> <span class="fu">analyzeCausalChain</span><span class="op">(</span>limitedEvents<span class="op">);</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Capture performance metrics</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> performanceMetrics <span class="op">=</span> config<span class="op">.</span><span class="fu">isIncludePerformanceMetrics</span><span class="op">()</span> <span class="op">?</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>            <span class="fu">capturePerformanceMetrics</span><span class="op">()</span> <span class="op">:</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">of</span><span class="op">();</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Add additional context if provided</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> environmentContext <span class="op">=</span> <span class="fu">captureEnvironmentContext</span><span class="op">();</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>additionalContext <span class="op">!=</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>            <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> extendedContext <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">HashMap</span><span class="op">&lt;&gt;(</span>environmentContext<span class="op">);</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>            additionalContext<span class="op">.</span><span class="fu">forEach</span><span class="op">((</span>key<span class="op">,</span> value<span class="op">)</span> <span class="op">-&gt;</span> </span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>                extendedContext<span class="op">.</span><span class="fu">put</span><span class="op">(</span>key<span class="op">,</span> <span class="bu">String</span><span class="op">.</span><span class="fu">valueOf</span><span class="op">(</span>value<span class="op">))</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>            <span class="op">);</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>            environmentContext <span class="op">=</span> extendedContext<span class="op">;</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create the snapshot</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> EventSnapshot<span class="op">.</span><span class="fu">create</span><span class="op">(</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>            limitedEvents<span class="op">,</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>            errorContext<span class="op">.</span><span class="fu">getUserId</span><span class="op">(),</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>            environmentContext<span class="op">,</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>            errorContext<span class="op">.</span><span class="fu">getThreadName</span><span class="op">(),</span></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>            errorContext<span class="op">.</span><span class="fu">getSystemProperties</span><span class="op">(),</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>            causalChain<span class="op">,</span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>            performanceMetrics</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>        <span class="op">);</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">Exception</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Fallback: create minimal snapshot even if something goes wrong</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">createFallbackSnapshot</span><span class="op">(</span>e<span class="op">);</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Generates a snapshot specifically for an exception with exception<span class="co">-</span>specific context</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">exception</span><span class="co"> </span>the exception that occurred for specialized snapshot generation</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> event snapshot with exception context and analysis</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> EventSnapshot <span class="fu">generateSnapshotForException</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">Throwable</span> exception<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> exceptionContext <span class="op">=</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;exceptionType&quot;</span><span class="op">,</span> exception<span class="op">.</span><span class="fu">getClass</span><span class="op">().</span><span class="fu">getName</span><span class="op">(),</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;exceptionMessage&quot;</span><span class="op">,</span> exception<span class="op">.</span><span class="fu">getMessage</span><span class="op">()</span> <span class="op">!=</span> <span class="kw">null</span> <span class="op">?</span> exception<span class="op">.</span><span class="fu">getMessage</span><span class="op">()</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="op">,</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;stackTraceLength&quot;</span><span class="op">,</span> exception<span class="op">.</span><span class="fu">getStackTrace</span><span class="op">().</span><span class="fu">length</span></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">generateSnapshot</span><span class="op">(</span>exceptionContext<span class="op">);</span></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="event-processing-and-filtering-intelligence-operations">Event
Processing and Filtering Intelligence Operations</h2>
<div class="sourceCode" id="cb5"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Filters events based on configured criteria for selective snapshot generation</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">events</span><span class="co"> </span>the events to filter for relevance and performance optimization</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> filtered events based on configuration criteria</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> <span class="fu">filterEvents</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>config<span class="op">.</span><span class="fu">getEventFilter</span><span class="op">()</span> <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> events<span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> events<span class="op">.</span><span class="fu">stream</span><span class="op">()</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">filter</span><span class="op">(</span>config<span class="op">.</span><span class="fu">getEventFilter</span><span class="op">())</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">toList</span><span class="op">();</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Limits events to the configured maximum<span class="co">,</span> keeping the most recent for performance optimization</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">events</span><span class="co"> </span>the events to limit for performance and relevance</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> limited events maintaining most recent for context relevance</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> <span class="fu">limitEvents</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">&lt;=</span> config<span class="op">.</span><span class="fu">getMaxEvents</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> events<span class="op">;</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Keep the most recent events</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> events<span class="op">.</span><span class="fu">subList</span><span class="op">(</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>        events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">-</span> config<span class="op">.</span><span class="fu">getMaxEvents</span><span class="op">(),</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>        events<span class="op">.</span><span class="fu">size</span><span class="op">()</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="causal-analysis-and-root-cause-intelligence-operations">Causal
Analysis and Root Cause Intelligence Operations</h2>
<div class="sourceCode" id="cb6"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Analyzes causal relationships in the event sequence for debugging intelligence</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">events</span><span class="co"> </span>the events to analyze for causal relationships and patterns</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> causal chain analysis with confidence levels and contributing factors</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">@Nullable</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> CausalChain <span class="fu">analyzeCausalChain</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Simple causal analysis - can be enhanced with more sophisticated algorithms</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Look for patterns and timing relationships</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        VersionedDomainEvent lastEvent <span class="op">=</span> events<span class="op">.</span><span class="fu">get</span><span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Find potential root cause (simplified heuristic)</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        VersionedDomainEvent potentialRootCause <span class="op">=</span> <span class="fu">findPotentialRootCause</span><span class="op">(</span>events<span class="op">);</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>potentialRootCause <span class="op">!=</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            <span class="dt">double</span> confidence <span class="op">=</span> <span class="fu">calculateCausalConfidence</span><span class="op">(</span>events<span class="op">,</span> potentialRootCause<span class="op">);</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>confidence <span class="op">&gt;=</span> config<span class="op">.</span><span class="fu">getMinCausalConfidence</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> CausalChain<span class="op">.</span><span class="fu">fromRootCause</span><span class="op">(</span>potentialRootCause<span class="op">,</span> confidence<span class="op">)</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">addContributingFactor</span><span class="op">(</span><span class="st">&quot;Event sequence analysis&quot;</span><span class="op">);</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> CausalChain<span class="op">.</span><span class="fu">empty</span><span class="op">();</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">Exception</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="co">// If causal analysis fails, return empty chain</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> CausalChain<span class="op">.</span><span class="fu">empty</span><span class="op">();</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Finds potential root cause using simple heuristics for error analysis</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">events</span><span class="co"> </span>the events to analyze for root cause identification</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> potential root cause event or null if none identified</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="at">@Nullable</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> VersionedDomainEvent <span class="fu">findPotentialRootCause</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simple heuristic: look for error-related events or unusual patterns</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>VersionedDomainEvent event <span class="op">:</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>        <span class="bu">String</span> eventType <span class="op">=</span> event<span class="op">.</span><span class="fu">getEventType</span><span class="op">().</span><span class="fu">toLowerCase</span><span class="op">();</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;error&quot;</span><span class="op">)</span> <span class="op">||</span> </span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>            eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;fail&quot;</span><span class="op">)</span> <span class="op">||</span> </span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>            eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;reject&quot;</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> event<span class="op">;</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">// If no obvious error events, return the first event as potential root cause</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> events<span class="op">.</span><span class="fu">isEmpty</span><span class="op">()</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> events<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Calculates confidence in causal relationship for analysis quality assessment</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">events</span><span class="co"> </span>the event sequence for confidence calculation</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">rootCause</span><span class="co"> </span>the potential root cause for confidence evaluation</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> confidence level from <span class="co">0.0</span> to <span class="co">1.0</span> for analysis quality</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">double</span> <span class="fu">calculateCausalConfidence</span><span class="op">(</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>        <span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">,</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>        <span class="at">@NonNull</span> <span class="dt">final</span> VersionedDomainEvent rootCause<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simplified confidence calculation based on timing and sequence</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> rootCauseIndex <span class="op">=</span> events<span class="op">.</span><span class="fu">indexOf</span><span class="op">(</span>rootCause<span class="op">);</span></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>rootCauseIndex <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Higher confidence if root cause is earlier in sequence</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> positionFactor <span class="op">=</span> <span class="fl">1.0</span> <span class="op">-</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span> rootCauseIndex <span class="op">/</span> events<span class="op">.</span><span class="fu">size</span><span class="op">();</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Higher confidence if there are clear temporal relationships</span></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> timingFactor <span class="op">=</span> <span class="fl">0.7</span><span class="op">;</span> <span class="co">// Default moderate confidence</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span><span class="op">(</span><span class="fl">1.0</span><span class="op">,</span> positionFactor <span class="op">*</span> <span class="fl">0.6</span> <span class="op">+</span> timingFactor <span class="op">*</span> <span class="fl">0.4</span><span class="op">);</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="context-capture-and-performance-intelligence-operations">Context
Capture and Performance Intelligence Operations</h1>
<h2 id="performance-metrics-and-system-context-capture">Performance
Metrics and System Context Capture</h2>
<div class="sourceCode" id="cb7"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Captures current performance metrics for system analysis and debugging context</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> performance metrics with system resource information and timing data</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">capturePerformanceMetrics</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Runtime</span> runtime <span class="op">=</span> <span class="bu">Runtime</span><span class="op">.</span><span class="fu">getRuntime</span><span class="op">();</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> metrics <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">HashMap</span><span class="op">&lt;&gt;();</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;freeMemory&quot;</span><span class="op">,</span> runtime<span class="op">.</span><span class="fu">freeMemory</span><span class="op">());</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;totalMemory&quot;</span><span class="op">,</span> runtime<span class="op">.</span><span class="fu">totalMemory</span><span class="op">());</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;maxMemory&quot;</span><span class="op">,</span> runtime<span class="op">.</span><span class="fu">maxMemory</span><span class="op">());</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;availableProcessors&quot;</span><span class="op">,</span> runtime<span class="op">.</span><span class="fu">availableProcessors</span><span class="op">());</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;currentTimeMillis&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">currentTimeMillis</span><span class="op">());</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    metrics<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;nanoTime&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">nanoTime</span><span class="op">());</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> metrics<span class="op">;</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Captures environment context for the snapshot with system information</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> environment context with system properties and runtime information</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> <span class="fu">captureEnvironmentContext</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">String</span><span class="op">&gt;</span> context <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">HashMap</span><span class="op">&lt;&gt;();</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    context<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;timestamp&quot;</span><span class="op">,</span> Instant<span class="op">.</span><span class="fu">now</span><span class="op">().</span><span class="fu">toString</span><span class="op">());</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    context<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;javaVersion&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">getProperty</span><span class="op">(</span><span class="st">&quot;java.version&quot;</span><span class="op">,</span> <span class="st">&quot;unknown&quot;</span><span class="op">));</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    context<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;osName&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">getProperty</span><span class="op">(</span><span class="st">&quot;os.name&quot;</span><span class="op">,</span> <span class="st">&quot;unknown&quot;</span><span class="op">));</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    context<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;osVersion&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">getProperty</span><span class="op">(</span><span class="st">&quot;os.version&quot;</span><span class="op">,</span> <span class="st">&quot;unknown&quot;</span><span class="op">));</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    context<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;userTimezone&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">getProperty</span><span class="op">(</span><span class="st">&quot;user.timezone&quot;</span><span class="op">,</span> <span class="st">&quot;unknown&quot;</span><span class="op">));</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> context<span class="op">;</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="fallback-and-error-recovery-operations">Fallback and Error
Recovery Operations</h2>
<div class="sourceCode" id="cb8"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates a minimal fallback snapshot if generation fails for error resilience</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">generationError</span><span class="co"> </span>the error that occurred during snapshot generation</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> minimal fallback snapshot with basic context and error information</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> EventSnapshot <span class="fu">createFallbackSnapshot</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> <span class="bu">Exception</span> generationError<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> EventSnapshot<span class="op">.</span><span class="fu">create</span><span class="op">(</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(),</span> <span class="co">// Empty event history</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">null</span><span class="op">,</span> <span class="co">// No user context</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Map</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span><span class="st">&quot;fallback&quot;</span><span class="op">,</span> <span class="st">&quot;true&quot;</span><span class="op">,</span> <span class="st">&quot;error&quot;</span><span class="op">,</span> generationError<span class="op">.</span><span class="fu">getMessage</span><span class="op">()),</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Thread</span><span class="op">.</span><span class="fu">currentThread</span><span class="op">().</span><span class="fu">getName</span><span class="op">(),</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Map</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span><span class="st">&quot;java.version&quot;</span><span class="op">,</span> <span class="bu">System</span><span class="op">.</span><span class="fu">getProperty</span><span class="op">(</span><span class="st">&quot;java.version&quot;</span><span class="op">,</span> <span class="st">&quot;unknown&quot;</span><span class="op">)),</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">null</span><span class="op">,</span> <span class="co">// No causal analysis</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Map</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span><span class="st">&quot;fallbackGeneration&quot;</span><span class="op">,</span> <span class="kw">true</span><span class="op">)</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gets the current configuration for snapshot generation settings access</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> snapshot generation configuration with current settings</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> SnapshotConfig <span class="fu">getConfig</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> config<span class="op">;</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1
id="enhanced-snapshot-intelligence-and-advanced-analysis-operations">Enhanced
Snapshot Intelligence and Advanced Analysis Operations</h1>
<h2 id="advanced-configuration-and-optimization-features">Advanced
Configuration and Optimization Features</h2>
<div class="sourceCode" id="cb9"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates optimized configuration for high<span class="co">-</span>performance snapshot generation</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> optimized configuration with reduced overhead and focused analysis</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> SnapshotConfig <span class="fu">createOptimizedConfig</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SnapshotConfig<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxEvents</span><span class="op">(</span><span class="dv">50</span><span class="op">)</span>  <span class="co">// Reduced for performance</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofMinutes</span><span class="op">(</span><span class="dv">2</span><span class="op">))</span>  <span class="co">// Shorter window</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includeCausalAnalysis</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span>  <span class="co">// Skip expensive analysis</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includePerformanceMetrics</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span>  <span class="co">// Keep for optimization insights</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">minCausalConfidence</span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span>  <span class="co">// Higher confidence threshold</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates comprehensive configuration for detailed debugging analysis</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> comprehensive configuration with maximum detail and analysis</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> SnapshotConfig <span class="fu">createComprehensiveConfig</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SnapshotConfig<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxEvents</span><span class="op">(</span><span class="dv">500</span><span class="op">)</span>  <span class="co">// Extended for comprehensive analysis</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofMinutes</span><span class="op">(</span><span class="dv">15</span><span class="op">))</span>  <span class="co">// Longer history</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includeCausalAnalysis</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span>  <span class="co">// Full causal analysis</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includePerformanceMetrics</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span>  <span class="co">// Complete metrics</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">minCausalConfidence</span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span>  <span class="co">// Lower threshold for more insights</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Creates configuration specifically for error scenarios</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@return</span> error<span class="co">-</span>focused configuration optimized for error analysis</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> SnapshotConfig <span class="fu">createErrorFocusedConfig</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> SnapshotConfig<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxEvents</span><span class="op">(</span><span class="dv">200</span><span class="op">)</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofMinutes</span><span class="op">(</span><span class="dv">10</span><span class="op">))</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includeCausalAnalysis</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includePerformanceMetrics</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">eventFilter</span><span class="op">(</span>event <span class="op">-&gt;</span> <span class="op">{</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>            <span class="bu">String</span> eventType <span class="op">=</span> event<span class="op">.</span><span class="fu">getEventType</span><span class="op">().</span><span class="fu">toLowerCase</span><span class="op">();</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;error&quot;</span><span class="op">)</span> <span class="op">||</span> </span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>                   eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;fail&quot;</span><span class="op">)</span> <span class="op">||</span> </span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>                   eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;reject&quot;</span><span class="op">)</span> <span class="op">||</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>                   eventType<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;exception&quot;</span><span class="op">);</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>        <span class="op">})</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">minCausalConfidence</span><span class="op">(</span><span class="fl">0.2</span><span class="op">)</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Validates snapshot configuration for correctness and optimization</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">config</span><span class="co"> </span>the configuration to validate</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> validation result with recommendations and warnings</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> ConfigValidationResult <span class="fu">validateConfig</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> SnapshotConfig config<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> warnings <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>    java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> recommendations <span class="op">=</span> <span class="kw">new</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>config<span class="op">.</span><span class="fu">getMaxEvents</span><span class="op">()</span> <span class="op">&gt;</span> <span class="dv">1000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>        warnings<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Large maxEvents may impact performance&quot;</span><span class="op">);</span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>        recommendations<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Consider reducing maxEvents for better performance&quot;</span><span class="op">);</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>config<span class="op">.</span><span class="fu">getMaxTimeWindow</span><span class="op">().</span><span class="fu">toMinutes</span><span class="op">()</span> <span class="op">&gt;</span> <span class="dv">30</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>        warnings<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Large time window may retrieve excessive events&quot;</span><span class="op">);</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>        recommendations<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Consider shorter time window for focused analysis&quot;</span><span class="op">);</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>config<span class="op">.</span><span class="fu">getMinCausalConfidence</span><span class="op">()</span> <span class="op">&lt;</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>        warnings<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Very low confidence threshold may produce unreliable analysis&quot;</span><span class="op">);</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>        recommendations<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Consider higher confidence threshold for quality&quot;</span><span class="op">);</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>config<span class="op">.</span><span class="fu">isIncludeCausalAnalysis</span><span class="op">()</span> <span class="op">&amp;&amp;</span> config<span class="op">.</span><span class="fu">getMaxEvents</span><span class="op">()</span> <span class="op">&lt;</span> <span class="dv">10</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>        warnings<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Causal analysis may be ineffective with few events&quot;</span><span class="op">);</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>        recommendations<span class="op">.</span><span class="fu">add</span><span class="op">(</span><span class="st">&quot;Increase maxEvents or disable causal analysis&quot;</span><span class="op">);</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ConfigValidationResult<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">isValid</span><span class="op">(</span>warnings<span class="op">.</span><span class="fu">isEmpty</span><span class="op">())</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">warnings</span><span class="op">(</span>warnings<span class="op">)</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">recommendations</span><span class="op">(</span>recommendations<span class="op">)</span></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">estimatedPerformanceImpact</span><span class="op">(</span><span class="fu">estimatePerformanceImpact</span><span class="op">(</span>config<span class="op">))</span></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Estimates performance impact of configuration settings</span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="an">config</span><span class="co"> </span>the configuration to analyze</span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> <span class="an">@return</span> performance impact assessment</span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a><span class="at">@NonNull</span></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> PerformanceImpact <span class="fu">estimatePerformanceImpact</span><span class="op">(</span><span class="at">@NonNull</span> <span class="dt">final</span> SnapshotConfig config<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a>    score <span class="op">+=</span> config<span class="op">.</span><span class="fu">getMaxEvents</span><span class="op">()</span> <span class="op">/</span> <span class="dv">100</span><span class="op">;</span>  <span class="co">// Events impact</span></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>    score <span class="op">+=</span> config<span class="op">.</span><span class="fu">getMaxTimeWindow</span><span class="op">().</span><span class="fu">toMinutes</span><span class="op">()</span> <span class="op">/</span> <span class="dv">5</span><span class="op">;</span>  <span class="co">// Time window impact</span></span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>    score <span class="op">+=</span> config<span class="op">.</span><span class="fu">isIncludeCausalAnalysis</span><span class="op">()</span> <span class="op">?</span> <span class="dv">3</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Causal analysis impact</span></span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a>    score <span class="op">+=</span> config<span class="op">.</span><span class="fu">isIncludePerformanceMetrics</span><span class="op">()</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Metrics impact</span></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">)</span> <span class="cf">return</span> PerformanceImpact<span class="op">.</span><span class="fu">LOW</span><span class="op">;</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&lt;=</span> <span class="dv">8</span><span class="op">)</span> <span class="cf">return</span> PerformanceImpact<span class="op">.</span><span class="fu">MEDIUM</span><span class="op">;</span></span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> PerformanceImpact<span class="op">.</span><span class="fu">HIGH</span><span class="op">;</span></span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="snapshot-analytics-and-validation-value-objects">Snapshot
Analytics and Validation Value Objects</h2>
<div class="sourceCode" id="cb10"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/EventSnapshotGenerator.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Performance impact levels for snapshot generation</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">enum</span> PerformanceImpact <span class="op">{</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">LOW</span><span class="op">(</span><span class="st">&quot;Minimal performance impact&quot;</span><span class="op">),</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MEDIUM</span><span class="op">(</span><span class="st">&quot;Moderate performance impact&quot;</span><span class="op">),</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">HIGH</span><span class="op">(</span><span class="st">&quot;Significant performance impact&quot;</span><span class="op">);</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">PerformanceImpact</span><span class="op">(</span><span class="bu">String</span> description<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">description</span> <span class="op">=</span> description<span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> description<span class="op">;</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Configuration validation result for setup optimization</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">Builder</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">EqualsAndHashCode</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">ToString</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="at">@lombok</span><span class="op">.</span><span class="fu">Getter</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> ConfigValidationResult <span class="op">{</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Whether configuration is valid</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">boolean</span> isValid<span class="op">;</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Configuration warnings</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> warnings<span class="op">;</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Configuration recommendations</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> java<span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">List</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> recommendations<span class="op">;</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Estimated performance impact</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> PerformanceImpact estimatedPerformanceImpact<span class="op">;</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="testing-and-validation-strategies">Testing and Validation
Strategies</h1>
<h2 id="snapshot-generation-testing">Snapshot Generation Testing</h2>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldGenerateComprehensiveSnapshots</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Configured snapshot generator</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    SnapshotConfig config <span class="op">=</span> SnapshotConfig<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxEvents</span><span class="op">(</span><span class="dv">50</span><span class="op">)</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maxTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofMinutes</span><span class="op">(</span><span class="dv">5</span><span class="op">))</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includeCausalAnalysis</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">includePerformanceMetrics</span><span class="op">(</span><span class="kw">true</span><span class="op">)</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    EventSnapshotGenerator generator <span class="op">=</span> EventSnapshotGenerator<span class="op">.</span><span class="fu">withConfig</span><span class="op">(</span>config<span class="op">);</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Generating snapshot</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    EventSnapshot snapshot <span class="op">=</span> generator<span class="op">.</span><span class="fu">generateSnapshot</span><span class="op">();</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Should contain comprehensive context</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>snapshot<span class="op">).</span><span class="fu">isNotNull</span><span class="op">();</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>snapshot<span class="op">.</span><span class="fu">getEvents</span><span class="op">()).</span><span class="fu">isNotNull</span><span class="op">();</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>snapshot<span class="op">.</span><span class="fu">getEnvironmentContext</span><span class="op">()).</span><span class="fu">isNotEmpty</span><span class="op">();</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>snapshot<span class="op">.</span><span class="fu">getPerformanceMetrics</span><span class="op">()).</span><span class="fu">isNotEmpty</span><span class="op">();</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="configuration-validation-testing">Configuration Validation
Testing</h2>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldValidateConfigurationCorrectly</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Different configuration scenarios</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    SnapshotConfig optimizedConfig <span class="op">=</span> EventSnapshotGenerator<span class="op">.</span><span class="fu">createOptimizedConfig</span><span class="op">();</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    SnapshotConfig comprehensiveConfig <span class="op">=</span> EventSnapshotGenerator<span class="op">.</span><span class="fu">createComprehensiveConfig</span><span class="op">();</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Validating configurations</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    ConfigValidationResult optimizedResult <span class="op">=</span> EventSnapshotGenerator<span class="op">.</span><span class="fu">validateConfig</span><span class="op">(</span>optimizedConfig<span class="op">);</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    ConfigValidationResult comprehensiveResult <span class="op">=</span> EventSnapshotGenerator<span class="op">.</span><span class="fu">validateConfig</span><span class="op">(</span>comprehensiveConfig<span class="op">);</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Should provide appropriate validation results</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>optimizedResult<span class="op">.</span><span class="fu">getEstimatedPerformanceImpact</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>PerformanceImpact<span class="op">.</span><span class="fu">LOW</span><span class="op">);</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>comprehensiveResult<span class="op">.</span><span class="fu">getEstimatedPerformanceImpact</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>PerformanceImpact<span class="op">.</span><span class="fu">HIGH</span><span class="op">);</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="exception-snapshot-testing">Exception Snapshot Testing</h2>
<div class="sourceCode" id="cb13"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldGenerateExceptionSpecificSnapshots</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Exception scenario</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    EventSnapshotGenerator generator <span class="op">=</span> EventSnapshotGenerator<span class="op">.</span><span class="fu">getInstance</span><span class="op">();</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">RuntimeException</span> testException <span class="op">=</span> <span class="kw">new</span> <span class="bu">RuntimeException</span><span class="op">(</span><span class="st">&quot;Test error&quot;</span><span class="op">);</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Generating exception snapshot</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    EventSnapshot exceptionSnapshot <span class="op">=</span> generator<span class="op">.</span><span class="fu">generateSnapshotForException</span><span class="op">(</span>testException<span class="op">);</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Should include exception context</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>exceptionSnapshot<span class="op">.</span><span class="fu">getEnvironmentContext</span><span class="op">()).</span><span class="fu">containsKey</span><span class="op">(</span><span class="st">&quot;exceptionType&quot;</span><span class="op">);</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>exceptionSnapshot<span class="op">.</span><span class="fu">getEnvironmentContext</span><span class="op">()).</span><span class="fu">containsKey</span><span class="op">(</span><span class="st">&quot;exceptionMessage&quot;</span><span class="op">);</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="related-documentation">Related Documentation</h1>
<ul>
<li><span class="spurious-link"
target="EventSnapshot.org"><em>EventSnapshot</em></span>: Snapshots
created by this generator</li>
<li><span class="spurious-link"
target="ErrorContext.org"><em>ErrorContext</em></span>: Error context
captured in snapshots</li>
<li><span class="spurious-link"
target="CausalChain.org"><em>CausalChain</em></span>: Causal analysis
included in snapshots</li>
<li><span class="spurious-link"
target="EventStorePort.org"><em>EventStorePort</em></span>: Event store
providing events for snapshots</li>
<li><a href="../flows/error-analysis-flow.org">Error Analysis Flow</a>:
Flow using snapshot generation</li>
</ul>
<h1 id="implementation-notes">Implementation Notes</h1>
<h2 id="design-patterns-applied">Design Patterns Applied</h2>
<p>The class leverages several sophisticated design patterns:</p>
<ul>
<li><strong><strong>Singleton Pattern</strong></strong>: Global snapshot
generator with configurable instances</li>
<li><strong><strong>Builder Pattern</strong></strong>: Flexible
configuration construction with validation</li>
<li><strong><strong>Strategy Pattern</strong></strong>: Different
snapshot generation strategies based on configuration</li>
<li><strong><strong>Template Method Pattern</strong></strong>: Common
snapshot generation with configurable steps</li>
</ul>
<h2 id="domain-driven-design-principles">Domain-Driven Design
Principles</h2>
<p>The implementation follows strict DDD principles:</p>
<ul>
<li><strong><strong>Rich Domain Services</strong></strong>:
Comprehensive snapshot generation beyond simple data capture</li>
<li><strong><strong>Domain Intelligence</strong></strong>: Built-in
intelligence for causal analysis and context optimization</li>
<li><strong><strong>Infrastructure Independence</strong></strong>: Pure
domain logic with minimal infrastructure dependencies</li>
<li><strong><strong>Ubiquitous Language</strong></strong>: Clear,
business-focused naming and comprehensive documentation</li>
</ul>
<h2 id="future-enhancement-opportunities">Future Enhancement
Opportunities</h2>
<p>The design supports future enhancements:</p>
<ul>
<li><strong><strong>Machine Learning Analysis</strong></strong>:
AI-driven causal analysis and pattern recognition</li>
<li><strong><strong>Real-Time Snapshot Streaming</strong></strong>:
Real-time snapshot generation and analysis</li>
<li><strong><strong>Advanced Correlation Analysis</strong></strong>:
Sophisticated event correlation and pattern detection</li>
<li><strong><strong>Enterprise Debugging Integration</strong></strong>:
Enterprise debugging tool integration and workflow</li>
</ul>
<p>The EventSnapshotGenerator class provides ByteHot's essential
intelligent event snapshot generation foundation while maintaining
comprehensive debugging capabilities, sophisticated causal analysis
intelligence, and extensibility for advanced debugging scenarios
throughout the entire intelligent hot-swap system lifecycle.</p>
</main>
<div class="footer">
    ByteHot - Revolutionary JVM Hot-Swapping | 
    <a href="https://github.com/rydnr/bytehot">GitHub</a> | 
    <a href="https://rydnr.github.io/bytehot/docs/">Documentation</a> | 
    <a href="https://rydnr.github.io/bytehot/javadocs/">API Docs</a>
</div>
</body></html>
