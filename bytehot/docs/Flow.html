<!DOCTYPE html>
<html>
<head>
    <title>Flow - ByteHot Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="navigation">
    <a href="../index.html">üè† Home</a>
    <a href="../implementation.html">üèóÔ∏è Implementation</a>
    <a href="../journal.html">üìî Journal</a>
    <a href="../docs/">üìö Docs</a>
    <a href="../javadocs/">üìñ Javadocs</a>
    <a href="https://github.com/rydnr/bytehot">üîó GitHub</a>
</div>
<main>
<h1 id="overview">Overview</h1>
<p>The <code>Flow</code> value object represents a discovered pattern of
domain events that form a meaningful business process within the ByteHot
system. As an immutable data structure, it encapsulates the metadata and
characteristics of event sequences that have been identified through the
flow detection capabilities, enabling self-documenting system behavior
and process discovery.</p>
<h1 id="domain-role-and-significance">Domain Role and Significance</h1>
<h2 id="value-object-characteristics">Value Object Characteristics</h2>
<p>As a Value Object in Domain-Driven Design, Flow exhibits the
following essential characteristics:</p>
<ul>
<li><strong>Immutability</strong>: Once created, a Flow cannot be
modified</li>
<li><strong>Value Equality</strong>: Two flows are equal if all their
properties are equal</li>
<li><strong>Side-Effect Free</strong>: Operations on flows produce new
instances rather than modifying existing ones</li>
<li><strong>Self-Validation</strong>: Ensures internal consistency and
validity upon creation</li>
</ul>
<h2 id="business-meaning">Business Meaning</h2>
<p>A Flow represents the discovery that "a sequence of domain events
consistently occurs together in a specific pattern, representing a
meaningful business process that can be documented, analyzed, and
optimized."</p>
<h1 id="flow-structure-and-properties">Flow Structure and
Properties</h1>
<h2 id="core-identification">Core Identification</h2>
<div class="sourceCode" id="cb1"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/Flow.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Unique identifier for the flow<span class="co">.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>FlowId flowId<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Human<span class="co">-</span>readable name for the flow<span class="co">.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Description of what this flow represents<span class="co">.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> description<span class="op">;</span></span></code></pre></div>
<h2 id="event-sequence-definition">Event Sequence Definition</h2>
<div class="sourceCode" id="cb2"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/Flow.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Sequence of event types that form this flow<span class="co">.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">Class</span><span class="op">&lt;?</span> <span class="kw">extends</span> DomainEvent<span class="op">&gt;&gt;</span> eventSequence<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Minimum number of events required to identify this flow<span class="co">.</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> minimumEventCount<span class="op">;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Maximum time window for events to be considered part of the same flow<span class="co">.</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="bu">Duration</span> maximumTimeWindow<span class="op">;</span></span></code></pre></div>
<h2 id="quality-and-reliability-metrics">Quality and Reliability
Metrics</h2>
<div class="sourceCode" id="cb3"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/Flow.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Confidence level for flow detection <span class="co">(0.0</span> to <span class="co">1.0).</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> confidence<span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Optional conditions that must be met for flow detection<span class="co">.</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>Optional<span class="op">&lt;</span>FlowCondition<span class="op">&gt;</span> conditions<span class="op">;</span></span></code></pre></div>
<h1 id="flow-identification-and-naming">Flow Identification and
Naming</h1>
<h2 id="flowid-design">FlowId Design</h2>
<p>The FlowId provides unique identification across the entire
system:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> FlowId <span class="kw">extends</span> AbstractId <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Inherits UUID-based unique identification</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Provides type-safe flow referencing</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Enables flow correlation and lookup</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="naming-conventions">Naming Conventions</h2>
<p>Flow names follow specific patterns for consistency:</p>
<ul>
<li><strong>Hot-Swap Complete Flow</strong>: End-to-end hot-swap
operation</li>
<li><strong>User Session Flow</strong>: User authentication and session
management</li>
<li><strong>Error Recovery Flow</strong>: System error detection and
recovery</li>
<li><strong>File Change Detection Flow</strong>: File monitoring and
change processing</li>
</ul>
<h1 id="event-sequence-patterns">Event Sequence Patterns</h1>
<h2 id="linear-event-chains">Linear Event Chains</h2>
<p>Simple sequential flows where events follow a strict order:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Example: Hot-Swap Complete Flow</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">Class</span><span class="op">&lt;?</span> <span class="kw">extends</span> DomainEvent<span class="op">&gt;&gt;</span> sequence <span class="op">=</span> <span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    ClassFileChanged<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    ClassMetadataExtracted<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    BytecodeValidated<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    HotSwapRequested<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    ClassRedefinitionSucceeded<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    InstancesUpdated<span class="op">.</span><span class="fu">class</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span></code></pre></div>
<h2 id="parallel-event-patterns">Parallel Event Patterns</h2>
<p>Flows that may contain parallel or alternative paths:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Example: Error Recovery Flow with alternatives</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">Class</span><span class="op">&lt;?</span> <span class="kw">extends</span> DomainEvent<span class="op">&gt;&gt;</span> errorSequence <span class="op">=</span> <span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    ClassRedefinitionFailed<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    ErrorRecoveryInitiated<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    RollbackRequested<span class="op">.</span><span class="fu">class</span><span class="op">,</span>     <span class="co">// OR RetryRequested.class</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    SystemRecovered<span class="op">.</span><span class="fu">class</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span></code></pre></div>
<h2 id="conditional-event-flows">Conditional Event Flows</h2>
<p>Flows where certain events only occur under specific conditions:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Example: User Session Flow with optional authentication</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">&lt;</span><span class="bu">Class</span><span class="op">&lt;?</span> <span class="kw">extends</span> DomainEvent<span class="op">&gt;&gt;</span> userSequence <span class="op">=</span> <span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    UserDiscoveryRequested<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    UserAuthenticated<span class="op">.</span><span class="fu">class</span><span class="op">,</span>         <span class="co">// Only if authentication required</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    UserSessionStarted<span class="op">.</span><span class="fu">class</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span></code></pre></div>
<h1 id="temporal-characteristics">Temporal Characteristics</h1>
<h2 id="time-window-constraints">Time Window Constraints</h2>
<p>Flows define temporal boundaries for event grouping:</p>
<ul>
<li><strong>Maximum Time Window</strong>: Events outside this window are
not considered part of the same flow instance</li>
<li><strong>Minimum Event Count</strong>: Ensures statistical
significance before pattern recognition</li>
<li><strong>Confidence Threshold</strong>: Quality gate for pattern
reliability</li>
</ul>
<h2 id="temporal-analysis">Temporal Analysis</h2>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isWithinTimeWindow</span><span class="op">(</span><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">&lt;</span> minimumEventCount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    Instant firstEvent <span class="op">=</span> events<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="dv">0</span><span class="op">).</span><span class="fu">getTimestamp</span><span class="op">();</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    Instant lastEvent <span class="op">=</span> events<span class="op">.</span><span class="fu">get</span><span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">-</span> <span class="dv">1</span><span class="op">).</span><span class="fu">getTimestamp</span><span class="op">();</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Duration</span> actualDuration <span class="op">=</span> <span class="bu">Duration</span><span class="op">.</span><span class="fu">between</span><span class="op">(</span>firstEvent<span class="op">,</span> lastEvent<span class="op">);</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> actualDuration<span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>maximumTimeWindow<span class="op">)</span> <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="confidence-and-quality-metrics">Confidence and Quality
Metrics</h1>
<h2 id="confidence-calculation">Confidence Calculation</h2>
<p>Confidence represents the statistical reliability of flow
detection:</p>
<ul>
<li><strong>1.0</strong>: Perfect match - all expected events present in
exact order</li>
<li><strong>0.8-0.9</strong>: High confidence - minor variations or
optional events missing</li>
<li><strong>0.6-0.7</strong>: Medium confidence - pattern present but
with some noise</li>
<li><strong>Below 0.6</strong>: Low confidence - pattern uncertain or
incomplete</li>
</ul>
<h2 id="quality-factors-influencing-confidence">Quality Factors
Influencing Confidence</h2>
<ul>
<li>Event sequence completeness</li>
<li>Temporal consistency within time windows</li>
<li>Frequency of pattern occurrence</li>
<li>Absence of contradictory events</li>
<li>Historical validation accuracy</li>
</ul>
<h1 id="flow-conditions-and-constraints">Flow Conditions and
Constraints</h1>
<h2 id="flowcondition-interface">FlowCondition Interface</h2>
<p>Optional conditions that must be satisfied for flow recognition:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> FlowCondition <span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Evaluates whether the condition is met for the given event sequence<span class="co">.</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">boolean</span> <span class="fu">evaluate</span><span class="op">(</span><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">);</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Provides human<span class="co">-</span>readable description of the condition<span class="co">.</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">();</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="common-flow-conditions">Common Flow Conditions</h2>
<ul>
<li><strong>User-Specific</strong>: Flow only applies to certain
users</li>
<li><strong>Environment-Specific</strong>: Different patterns in
development vs. production</li>
<li><strong>Time-Based</strong>: Seasonal or time-dependent
patterns</li>
<li><strong>State-Dependent</strong>: Flows that require specific system
state</li>
</ul>
<h1 id="flow-creation-and-builder-pattern">Flow Creation and Builder
Pattern</h1>
<h2 id="builder-pattern-implementation">Builder Pattern
Implementation</h2>
<div class="sourceCode" id="cb10"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/Flow.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> FlowBuilder <span class="fu">builder</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="fu">FlowBuilder</span><span class="op">();</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> FlowBuilder <span class="op">{</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> FlowId flowId<span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> description<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">List</span><span class="op">&lt;</span><span class="bu">Class</span><span class="op">&lt;?</span> <span class="kw">extends</span> DomainEvent<span class="op">&gt;&gt;</span> eventSequence<span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">int</span> minimumEventCount<span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Duration</span> maximumTimeWindow<span class="op">;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> confidence<span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Optional<span class="op">&lt;</span>FlowCondition<span class="op">&gt;</span> conditions<span class="op">;</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> FlowBuilder <span class="fu">flowId</span><span class="op">(</span>FlowId flowId<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">flowId</span> <span class="op">=</span> flowId<span class="op">;</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> FlowBuilder <span class="fu">name</span><span class="op">(</span><span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">name</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Additional builder methods...</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> Flow <span class="fu">build</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>        <span class="fu">validate</span><span class="op">();</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="fu">Flow</span><span class="op">(</span>flowId<span class="op">,</span> name<span class="op">,</span> description<span class="op">,</span> eventSequence<span class="op">,</span> </span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>                       minimumEventCount<span class="op">,</span> maximumTimeWindow<span class="op">,</span> confidence<span class="op">,</span> conditions<span class="op">);</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">validate</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>flowId <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;FlowId is required&quot;</span><span class="op">);</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>name <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> name<span class="op">.</span><span class="fu">trim</span><span class="op">().</span><span class="fu">isEmpty</span><span class="op">())</span> </span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Name is required&quot;</span><span class="op">);</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>eventSequence <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> eventSequence<span class="op">.</span><span class="fu">isEmpty</span><span class="op">())</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Event sequence cannot be empty&quot;</span><span class="op">);</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>confidence <span class="op">&lt;</span> <span class="fl">0.0</span> <span class="op">||</span> confidence <span class="op">&gt;</span> <span class="fl">1.0</span><span class="op">)</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Confidence must be between 0.0 and 1.0&quot;</span><span class="op">);</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>minimumEventCount <span class="op">&lt;</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Minimum event count must be positive&quot;</span><span class="op">);</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>maximumTimeWindow <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> maximumTimeWindow<span class="op">.</span><span class="fu">isNegative</span><span class="op">())</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Maximum time window must be positive&quot;</span><span class="op">);</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="flow-comparison-and-equality">Flow Comparison and Equality</h1>
<h2 id="value-object-equality">Value Object Equality</h2>
<p>Flows are compared based on their complete value, not identity:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Override</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">equals</span><span class="op">(</span><span class="bu">Object</span> obj<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span><span class="kw">this</span> <span class="op">==</span> obj<span class="op">)</span> <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>obj <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> <span class="fu">getClass</span><span class="op">()</span> <span class="op">!=</span> obj<span class="op">.</span><span class="fu">getClass</span><span class="op">())</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    Flow flow <span class="op">=</span> <span class="op">(</span>Flow<span class="op">)</span> obj<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> minimumEventCount <span class="op">==</span> flow<span class="op">.</span><span class="fu">minimumEventCount</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>           <span class="bu">Double</span><span class="op">.</span><span class="fu">compare</span><span class="op">(</span>flow<span class="op">.</span><span class="fu">confidence</span><span class="op">,</span> confidence<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>           Objects<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>flowId<span class="op">,</span> flow<span class="op">.</span><span class="fu">flowId</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>           Objects<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>name<span class="op">,</span> flow<span class="op">.</span><span class="fu">name</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>           Objects<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>description<span class="op">,</span> flow<span class="op">.</span><span class="fu">description</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>           Objects<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>eventSequence<span class="op">,</span> flow<span class="op">.</span><span class="fu">eventSequence</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>           Objects<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>maximumTimeWindow<span class="op">,</span> flow<span class="op">.</span><span class="fu">maximumTimeWindow</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>           Objects<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>conditions<span class="op">,</span> flow<span class="op">.</span><span class="fu">conditions</span><span class="op">);</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="hash-code-implementation">Hash Code Implementation</h2>
<p>Consistent with equality semantics:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Override</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">int</span> <span class="fu">hashCode</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Objects<span class="op">.</span><span class="fu">hash</span><span class="op">(</span>flowId<span class="op">,</span> name<span class="op">,</span> description<span class="op">,</span> eventSequence<span class="op">,</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                       minimumEventCount<span class="op">,</span> maximumTimeWindow<span class="op">,</span> confidence<span class="op">,</span> conditions<span class="op">);</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="flow-utilization-patterns">Flow Utilization Patterns</h1>
<h2 id="pattern-matching">Pattern Matching</h2>
<p>Using flows to identify active patterns in event streams:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">matches</span><span class="op">(</span><span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check minimum event count</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>events<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">&lt;</span> minimumEventCount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check time window constraint</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span><span class="fu">isWithinTimeWindow</span><span class="op">(</span>events<span class="op">))</span> <span class="op">{</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check event sequence pattern</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span><span class="fu">matchesEventSequence</span><span class="op">(</span>events<span class="op">))</span> <span class="op">{</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Evaluate optional conditions</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> conditions<span class="op">.</span><span class="fu">map</span><span class="op">(</span>condition <span class="op">-&gt;</span> condition<span class="op">.</span><span class="fu">evaluate</span><span class="op">(</span>events<span class="op">))</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>                    <span class="op">.</span><span class="fu">orElse</span><span class="op">(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="flow-documentation-generation">Flow Documentation
Generation</h2>
<p>Automatic documentation from flow definitions:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">generateDocumentation</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">StringBuilder</span> doc <span class="op">=</span> <span class="kw">new</span> <span class="bu">StringBuilder</span><span class="op">();</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;# &quot;</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span>name<span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;## Description</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span>description<span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;## Event Sequence</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> eventSequence<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;. &quot;</span><span class="op">)</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">append</span><span class="op">(</span>eventSequence<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">).</span><span class="fu">getSimpleName</span><span class="op">())</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">## Flow Characteristics</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;- **Minimum Events:** &quot;</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span>minimumEventCount<span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;- **Time Window:** &quot;</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span>maximumTimeWindow<span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    doc<span class="op">.</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;- **Confidence:** &quot;</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span>confidence <span class="op">*</span> <span class="dv">100</span><span class="op">).</span><span class="fu">append</span><span class="op">(</span><span class="st">&quot;%</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doc<span class="op">.</span><span class="fu">toString</span><span class="op">();</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="predefined-flow-patterns">Predefined Flow Patterns</h1>
<h2 id="hot-swap-complete-flow">Hot-Swap Complete Flow</h2>
<div class="sourceCode" id="cb15"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> Flow HOT_SWAP_COMPLETE_FLOW <span class="op">=</span> Flow<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">flowId</span><span class="op">(</span>FlowId<span class="op">.</span><span class="fu">of</span><span class="op">(</span><span class="st">&quot;hot-swap-complete&quot;</span><span class="op">))</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">name</span><span class="op">(</span><span class="st">&quot;Hot-Swap Complete Flow&quot;</span><span class="op">)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">description</span><span class="op">(</span><span class="st">&quot;Complete hot-swap operation from file change to instance update&quot;</span><span class="op">)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">eventSequence</span><span class="op">(</span><span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        ClassFileChanged<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        ClassMetadataExtracted<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        BytecodeValidated<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        HotSwapRequested<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>        ClassRedefinitionSucceeded<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        InstancesUpdated<span class="op">.</span><span class="fu">class</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">))</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">minimumEventCount</span><span class="op">(</span><span class="dv">4</span><span class="op">)</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">maximumTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofSeconds</span><span class="op">(</span><span class="dv">30</span><span class="op">))</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">confidence</span><span class="op">(</span><span class="fl">0.95</span><span class="op">)</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span></code></pre></div>
<h2 id="user-session-flow">User Session Flow</h2>
<div class="sourceCode" id="cb16"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> Flow USER_SESSION_FLOW <span class="op">=</span> Flow<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">flowId</span><span class="op">(</span>FlowId<span class="op">.</span><span class="fu">of</span><span class="op">(</span><span class="st">&quot;user-session&quot;</span><span class="op">))</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">name</span><span class="op">(</span><span class="st">&quot;User Session Flow&quot;</span><span class="op">)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">description</span><span class="op">(</span><span class="st">&quot;User authentication and session management&quot;</span><span class="op">)</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">eventSequence</span><span class="op">(</span><span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        UserDiscoveryRequested<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        UserAuthenticated<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        UserSessionStarted<span class="op">.</span><span class="fu">class</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">))</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">minimumEventCount</span><span class="op">(</span><span class="dv">2</span><span class="op">)</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">maximumTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofMinutes</span><span class="op">(</span><span class="dv">5</span><span class="op">))</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">confidence</span><span class="op">(</span><span class="fl">0.90</span><span class="op">)</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span></code></pre></div>
<h1 id="testing-and-validation">Testing and Validation</h1>
<h2 id="flow-creation-testing">Flow Creation Testing</h2>
<div class="sourceCode" id="cb17"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldCreateValidFlow</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Valid flow parameters</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    FlowId flowId <span class="op">=</span> FlowId<span class="op">.</span><span class="fu">of</span><span class="op">(</span><span class="st">&quot;test-flow&quot;</span><span class="op">);</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span><span class="bu">Class</span><span class="op">&lt;?</span> <span class="kw">extends</span> DomainEvent<span class="op">&gt;&gt;</span> events <span class="op">=</span> <span class="bu">List</span><span class="op">.</span><span class="fu">of</span><span class="op">(</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        ClassFileChanged<span class="op">.</span><span class="fu">class</span><span class="op">,</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        BytecodeValidated<span class="op">.</span><span class="fu">class</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Flow is created</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    Flow flow <span class="op">=</span> Flow<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">flowId</span><span class="op">(</span>flowId<span class="op">)</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">name</span><span class="op">(</span><span class="st">&quot;Test Flow&quot;</span><span class="op">)</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">description</span><span class="op">(</span><span class="st">&quot;Test flow description&quot;</span><span class="op">)</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">eventSequence</span><span class="op">(</span>events<span class="op">)</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">minimumEventCount</span><span class="op">(</span><span class="dv">2</span><span class="op">)</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">maximumTimeWindow</span><span class="op">(</span><span class="bu">Duration</span><span class="op">.</span><span class="fu">ofSeconds</span><span class="op">(</span><span class="dv">10</span><span class="op">))</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">confidence</span><span class="op">(</span><span class="fl">0.8</span><span class="op">)</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Flow should be valid</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>flow<span class="op">.</span><span class="fu">getFlowId</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>flowId<span class="op">);</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>flow<span class="op">.</span><span class="fu">getName</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span><span class="st">&quot;Test Flow&quot;</span><span class="op">);</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>flow<span class="op">.</span><span class="fu">getEventSequence</span><span class="op">()).</span><span class="fu">isEqualTo</span><span class="op">(</span>events<span class="op">);</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="pattern-matching-testing">Pattern Matching Testing</h2>
<div class="sourceCode" id="cb18"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">shouldMatchEventSequence</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Given: Flow pattern and matching events</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    Flow flow <span class="op">=</span> <span class="fu">createTestFlow</span><span class="op">();</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span>VersionedDomainEvent<span class="op">&gt;</span> events <span class="op">=</span> <span class="fu">createMatchingEventSequence</span><span class="op">();</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// When: Pattern matching is performed</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">boolean</span> matches <span class="op">=</span> flow<span class="op">.</span><span class="fu">matches</span><span class="op">(</span>events<span class="op">);</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then: Should match successfully</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>matches<span class="op">).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="performance-and-optimization">Performance and Optimization</h1>
<h2 id="memory-efficiency">Memory Efficiency</h2>
<ul>
<li>Immutable event sequence lists prevent unnecessary copying</li>
<li>Lazy evaluation of optional conditions</li>
<li>Efficient hash code computation for caching</li>
</ul>
<h2 id="matching-performance">Matching Performance</h2>
<ul>
<li>Early termination for obvious mismatches</li>
<li>Optimized event type comparison</li>
<li>Cached validation results where appropriate</li>
</ul>
<h1 id="related-documentation">Related Documentation</h1>
<ul>
<li><a href="./FlowDetector.org">FlowDetector</a>: Flow discovery
aggregate</li>
<li><a href="./FlowId.org">FlowId</a>: Flow identification value
object</li>
<li><a href="./FlowCondition.org">FlowCondition</a>: Flow condition
interface</li>
<li><a href="./events/FlowDiscovered.org">FlowDiscovered</a>: Flow
discovery event</li>
<li><a href="../flows/flow-detection-process.org">Flow Detection
Process</a>: Complete flow detection workflow</li>
</ul>
<h1 id="future-evolution">Future Evolution</h1>
<h2 id="anticipated-enhancements">Anticipated Enhancements</h2>
<ul>
<li>Machine learning integration for pattern confidence calculation</li>
<li>Complex conditional logic support</li>
<li>Multi-dimensional flow analysis</li>
<li>Real-time flow adaptation based on system behavior</li>
</ul>
<h2 id="extensibility-points">Extensibility Points</h2>
<ul>
<li>Custom flow condition implementations</li>
<li>Pluggable confidence calculation algorithms</li>
<li>Alternative event sequence matching strategies</li>
<li>Integration with external process modeling tools</li>
</ul>
<p>The Flow value object serves as the foundation for ByteHot's
self-documenting capabilities, transforming discovered event patterns
into meaningful business process documentation that evolves with the
system's actual behavior.</p>
</main>
<div class="footer">
    ByteHot - Revolutionary JVM Hot-Swapping | 
    <a href="https://github.com/rydnr/bytehot">GitHub</a> | 
    <a href="https://rydnr.github.io/bytehot/docs/">Documentation</a> | 
    <a href="https://rydnr.github.io/bytehot/javadocs/">API Docs</a>
</div>
</body></html>
