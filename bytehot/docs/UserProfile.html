<!DOCTYPE html>
<html>
<head>
    <title>UserProfile - ByteHot Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="navigation">
    <a href="../index.html">üè† Home</a>
    <a href="../implementation.html">üèóÔ∏è Implementation</a>
    <a href="../journal.html">üìî Journal</a>
    <a href="../docs/">üìö Docs</a>
    <a href="../javadocs/">üìñ Javadocs</a>
    <a href="https://github.com/rydnr/bytehot">üîó GitHub</a>
</div>
<main>
<h1 id="overview">Overview</h1>
<p>The <code>UserProfile</code> class is a value object representing
comprehensive user profile information in ByteHot's user management
domain, providing immutable user data with intelligent auto-population
and builder patterns.</p>
<h1 id="class-responsibilities">Class Responsibilities</h1>
<h2 id="primary-responsibilities">Primary Responsibilities</h2>
<ul>
<li>Store and manage user profile information (name, email, avatar)</li>
<li>Provide immutable update operations with builder patterns</li>
<li>Auto-populate profile data from Git configuration and
environment</li>
<li>Support profile validation and consistency checking</li>
</ul>
<h2 id="secondary-responsibilities">Secondary Responsibilities</h2>
<ul>
<li>Generate default profiles for new users</li>
<li>Handle profile data extraction from various sources</li>
<li>Maintain profile completeness and data quality</li>
<li>Support profile serialization and persistence</li>
</ul>
<h1 id="value-object-design">Value Object Design</h1>
<h2 id="immutability-guarantees">Immutability Guarantees</h2>
<p>All UserProfile instances are completely immutable:</p>
<div class="sourceCode" id="cb1"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="at">@RequiredArgsConstructor</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">@EqualsAndHashCode</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">@ToString</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">@Getter</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> UserProfile <span class="op">{</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> UserId userId<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> fullName<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> email<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> avatarUrl<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> Instant createdAt<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> Instant updatedAt<span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="builder-pattern-implementation">Builder Pattern
Implementation</h2>
<p>Immutable updates through fluent builder methods:</p>
<p>public UserProfile withFullName(final String newFullName) { return
new UserProfile( this.userId, newFullName, this.email, this.avatarUrl,
this.createdAt, Instant.now() ); }</p>
<p>public UserProfile withEmail(final String newEmail) { return new
UserProfile( this.userId, this.fullName, newEmail, this.avatarUrl,
this.createdAt, Instant.now() ); }</p>
<p>public UserProfile withAvatarUrl(final String newAvatarUrl) { return
new UserProfile( this.userId, this.fullName, this.email, newAvatarUrl,
this.createdAt, Instant.now() ); }</p>
<h1 id="factory-methods-and-auto-population">Factory Methods and
Auto-Population</h1>
<h2 id="default-profile-creation">Default Profile Creation</h2>
<p>Intelligent default profile generation:</p>
<div class="sourceCode" id="cb2"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> UserProfile <span class="fu">defaultProfile</span><span class="op">(</span><span class="dt">final</span> UserId userId<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> Instant now <span class="op">=</span> Instant<span class="op">.</span><span class="fu">now</span><span class="op">();</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Try to auto-populate from Git configuration</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> GitConfig gitConfig <span class="op">=</span> <span class="fu">readGitConfiguration</span><span class="op">();</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> fullName <span class="op">=</span> gitConfig<span class="op">.</span><span class="fu">getName</span><span class="op">()</span> <span class="op">!=</span> <span class="kw">null</span> <span class="op">?</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        gitConfig<span class="op">.</span><span class="fu">getName</span><span class="op">()</span> <span class="op">:</span> userId<span class="op">.</span><span class="fu">getDisplayName</span><span class="op">();</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> email <span class="op">=</span> gitConfig<span class="op">.</span><span class="fu">getEmail</span><span class="op">()</span> <span class="op">!=</span> <span class="kw">null</span> <span class="op">?</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        gitConfig<span class="op">.</span><span class="fu">getEmail</span><span class="op">()</span> <span class="op">:</span> userId<span class="op">.</span><span class="fu">getValue</span><span class="op">();</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="fu">UserProfile</span><span class="op">(</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        userId<span class="op">,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        fullName<span class="op">,</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        email<span class="op">,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">null</span><span class="op">,</span> <span class="co">// Avatar URL will be populated separately if needed</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        now<span class="op">,</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        now</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="git-configuration-integration">Git Configuration
Integration</h2>
<p>Automatic profile population from Git:</p>
<p>private static GitConfig readGitConfiguration() { try { final String
gitName = executeGitCommand("config", "user.name"); final String
gitEmail = executeGitCommand("config", "user.email");</p>
<p>return new GitConfig( gitName.trim().isEmpty() ? null :
gitName.trim(), gitEmail.trim().isEmpty() ? null : gitEmail.trim() ); }
catch (final Exception e) { // Git not available or configuration
missing return GitConfig.empty(); } }</p>
<p>private static String executeGitCommand(final String‚Ä¶ args) throws
IOException, InterruptedException { final ProcessBuilder pb = new
ProcessBuilder(); pb.command("git");
pb.command().addAll(Arrays.asList(args));</p>
<p>final Process process = pb.start(); final String output =
readProcessOutput(process);</p>
<p>if (process.waitFor() != 0) { return ""; }</p>
<p>return output; }</p>
<h1 id="profile-validation-and-quality">Profile Validation and
Quality</h1>
<h2 id="data-validation">Data Validation</h2>
<p>Comprehensive validation of profile data:</p>
<div class="sourceCode" id="cb3"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">validateProfileData</span><span class="op">(</span><span class="dt">final</span> UserId userId<span class="op">,</span> <span class="dt">final</span> <span class="bu">String</span> fullName<span class="op">,</span> <span class="dt">final</span> <span class="bu">String</span> email<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>userId <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;User ID cannot be null&quot;</span><span class="op">);</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fullName <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> fullName<span class="op">.</span><span class="fu">trim</span><span class="op">().</span><span class="fu">isEmpty</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Full name cannot be empty string&quot;</span><span class="op">);</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>email <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu">isValidEmail</span><span class="op">(</span>email<span class="op">))</span> <span class="op">{</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">&quot;Invalid email format: &quot;</span> <span class="op">+</span> email<span class="op">);</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">boolean</span> <span class="fu">isValidEmail</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> email<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> email<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;@&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> email<span class="op">.</span><span class="fu">contains</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>           email<span class="op">.</span><span class="fu">indexOf</span><span class="op">(</span><span class="st">&quot;@&quot;</span><span class="op">)</span> <span class="op">&lt;</span> email<span class="op">.</span><span class="fu">lastIndexOf</span><span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">);</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="profile-completeness">Profile Completeness</h2>
<p>Assessment of profile data quality:</p>
<p>public boolean isComplete() { return hasFullName() &amp;&amp;
hasValidEmail() &amp;&amp; hasAvatar(); }</p>
<p>public boolean hasFullName() { return fullName != null &amp;&amp;
!fullName.trim().isEmpty(); }</p>
<p>public boolean hasValidEmail() { return email != null &amp;&amp;
isValidEmail(email); }</p>
<p>public boolean hasAvatar() { return avatarUrl != null &amp;&amp;
!avatarUrl.trim().isEmpty(); }</p>
<p>public double getCompletenessScore() { double score = 0.0; if
(hasFullName()) score += 0.4; if (hasValidEmail()) score += 0.4; if
(hasAvatar()) score += 0.2; return score; }</p>
<h1 id="integration-with-user-management-domain">Integration with User
Management Domain</h1>
<h2 id="user-aggregate-coordination">User Aggregate Coordination</h2>
<p>UserProfile is composed within User aggregate:</p>
<div class="sourceCode" id="cb4"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// In User aggregate</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> DomainResponseEvent<span class="op">&lt;</span>UserRegistrationRequested<span class="op">&gt;</span> <span class="fu">accept</span><span class="op">(</span><span class="dt">final</span> UserRegistrationRequested event<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create user profile automatically</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> UserProfile profile <span class="op">=</span> UserProfile<span class="op">.</span><span class="fu">defaultProfile</span><span class="op">(</span>event<span class="op">.</span><span class="fu">getUserId</span><span class="op">());</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> User user <span class="op">=</span> <span class="kw">new</span> <span class="fu">User</span><span class="op">(</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        event<span class="op">.</span><span class="fu">getUserId</span><span class="op">(),</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        profile<span class="op">,</span>  <span class="co">// Profile integration</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        UserPreferences<span class="op">.</span><span class="fu">defaults</span><span class="op">(),</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        UserStatistics<span class="op">.</span><span class="fu">empty</span><span class="op">(),</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        Instant<span class="op">.</span><span class="fu">now</span><span class="op">(),</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        Instant<span class="op">.</span><span class="fu">now</span><span class="op">(),</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1L</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> UserRegistered<span class="op">.</span><span class="fu">of</span><span class="op">(</span>event<span class="op">,</span> profile<span class="op">,</span> event<span class="op">.</span><span class="fu">getSource</span><span class="op">());</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="domain-event-integration">Domain Event Integration</h2>
<p>Profile information propagates through user events:</p>
<p>// In UserRegistered event public class UserRegistered implements
DomainResponseEvent&lt;UserRegistrationRequested&gt; { private final
UserRegistrationRequested preceding; private final UserProfile
userProfile; // Profile included in events private final
UserRegistrationSource source; }</p>
<h1 id="profile-lifecycle-management">Profile Lifecycle Management</h1>
<h2 id="creation-lifecycle">Creation Lifecycle</h2>
<p>Profile creation follows predictable patterns:</p>
<div class="sourceCode" id="cb5"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Auto-discovery from Git</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>UserProfile profile <span class="op">=</span> UserProfile<span class="op">.</span><span class="fu">defaultProfile</span><span class="op">(</span>userId<span class="op">);</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Manual profile creation</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>UserProfile customProfile <span class="op">=</span> UserProfile<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">userId</span><span class="op">(</span>userId<span class="op">)</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">fullName</span><span class="op">(</span><span class="st">&quot;John Doe&quot;</span><span class="op">)</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">email</span><span class="op">(</span><span class="st">&quot;john.doe@example.com&quot;</span><span class="op">)</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. Profile updates</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>UserProfile updatedProfile <span class="op">=</span> profile</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withFullName</span><span class="op">(</span><span class="st">&quot;John Smith&quot;</span><span class="op">)</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withEmail</span><span class="op">(</span><span class="st">&quot;john.smith@example.com&quot;</span><span class="op">);</span></span></code></pre></div>
<h2 id="update-tracking">Update Tracking</h2>
<p>Profile changes are tracked through timestamps:</p>
<p>public boolean isRecentlyUpdated() { return
Duration.between(updatedAt, Instant.now()).toMinutes() &lt; 5; }</p>
<p>public boolean hasBeenUpdated() { return
!createdAt.equals(updatedAt); }</p>
<p>public Duration getAge() { return Duration.between(createdAt,
Instant.now()); }</p>
<h1 id="avatar-management">Avatar Management</h1>
<h2 id="avatar-url-handling">Avatar URL Handling</h2>
<p>Support for various avatar sources:</p>
<div class="sourceCode" id="cb6"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> UserProfile <span class="fu">withGravatarAvatar</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>email <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> emailHash <span class="op">=</span> <span class="fu">md5Hash</span><span class="op">(</span>email<span class="op">.</span><span class="fu">toLowerCase</span><span class="op">().</span><span class="fu">trim</span><span class="op">());</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> gravatarUrl <span class="op">=</span> <span class="st">&quot;https://www.gravatar.com/avatar/&quot;</span> <span class="op">+</span> emailHash <span class="op">+</span> <span class="st">&quot;?d=identicon&quot;</span><span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">withAvatarUrl</span><span class="op">(</span>gravatarUrl<span class="op">);</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> UserProfile <span class="fu">withDefaultAvatar</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">String</span> defaultUrl <span class="op">=</span> <span class="st">&quot;https://ui-avatars.com/api/?name=&quot;</span> <span class="op">+</span> </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">URLEncoder</span><span class="op">.</span><span class="fu">encode</span><span class="op">(</span><span class="fu">getDisplayName</span><span class="op">(),</span> StandardCharsets<span class="op">.</span><span class="fu">UTF_8</span><span class="op">)</span> <span class="op">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;&amp;background=random&quot;</span><span class="op">;</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">withAvatarUrl</span><span class="op">(</span>defaultUrl<span class="op">);</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span> <span class="bu">String</span> <span class="fu">getDisplayName</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">hasFullName</span><span class="op">()</span> <span class="op">?</span> fullName <span class="op">:</span> userId<span class="op">.</span><span class="fu">getDisplayName</span><span class="op">();</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="data-privacy-and-security">Data Privacy and Security</h1>
<h2 id="sensitive-data-handling">Sensitive Data Handling</h2>
<p>Careful handling of personal information:</p>
<p>public UserProfile anonymize() { return new UserProfile(
UserId.anonymous(), "Anonymous User", "anonymous@bytehot.local", null,
createdAt, Instant.now() ); }</p>
<p>public UserProfile redactSensitiveData() { return new UserProfile(
userId, hasFullName() ? maskName(fullName) : fullName, hasValidEmail() ?
maskEmail(email) : email, avatarUrl, createdAt, updatedAt ); }</p>
<p>private String maskEmail(final String email) { final int atIndex =
email.indexOf("@"); if (atIndex &lt;= 1) return email;</p>
<p>return email.charAt(0) + "<strong>*</strong>" +
email.substring(atIndex); }</p>
<h1 id="serialization-and-persistence">Serialization and
Persistence</h1>
<h2 id="json-serialization-support">JSON Serialization Support</h2>
<p>Profile data can be serialized for persistence:</p>
<div class="sourceCode" id="cb7"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Infrastructure layer would handle JSON conversion</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> <span class="fu">toMap</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> map <span class="op">=</span> <span class="kw">new</span> <span class="bu">HashMap</span><span class="op">&lt;&gt;();</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;userId&quot;</span><span class="op">,</span> userId<span class="op">.</span><span class="fu">getValue</span><span class="op">());</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;fullName&quot;</span><span class="op">,</span> fullName<span class="op">);</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;email&quot;</span><span class="op">,</span> email<span class="op">);</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;avatarUrl&quot;</span><span class="op">,</span> avatarUrl<span class="op">);</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;createdAt&quot;</span><span class="op">,</span> createdAt<span class="op">.</span><span class="fu">toString</span><span class="op">());</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">put</span><span class="op">(</span><span class="st">&quot;updatedAt&quot;</span><span class="op">,</span> updatedAt<span class="op">.</span><span class="fu">toString</span><span class="op">());</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> map<span class="op">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> UserProfile <span class="fu">fromMap</span><span class="op">(</span><span class="dt">final</span> <span class="bu">Map</span><span class="op">&lt;</span><span class="bu">String</span><span class="op">,</span> <span class="bu">Object</span><span class="op">&gt;</span> map<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="fu">UserProfile</span><span class="op">(</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">UserId</span><span class="op">((</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;userId&quot;</span><span class="op">),</span> <span class="fu">extractDisplayName</span><span class="op">((</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;userId&quot;</span><span class="op">))),</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">(</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;fullName&quot;</span><span class="op">),</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">(</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;email&quot;</span><span class="op">),</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">(</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;avatarUrl&quot;</span><span class="op">),</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        Instant<span class="op">.</span><span class="fu">parse</span><span class="op">((</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;createdAt&quot;</span><span class="op">)),</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        Instant<span class="op">.</span><span class="fu">parse</span><span class="op">((</span><span class="bu">String</span><span class="op">)</span> map<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;updatedAt&quot;</span><span class="op">))</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="error-handling-and-resilience">Error Handling and
Resilience</h1>
<h2 id="graceful-degradation">Graceful Degradation</h2>
<p>Profile creation never fails completely:</p>
<p>public static UserProfile safeDefaultProfile(final UserId userId) {
try { return defaultProfile(userId); } catch (final Exception e) { //
Fallback to minimal profile final Instant now = Instant.now(); return
new UserProfile( userId, userId.getDisplayName(), userId.getValue(),
null, now, now ); } }</p>
<h2 id="validation-error-recovery">Validation Error Recovery</h2>
<p>Robust validation with helpful error messages:</p>
<div class="sourceCode" id="cb8"
data-tangle="../bytehot/src/main/java/org/acmsl/bytehot/domain/UserProfile.java"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> ProfileValidationException <span class="kw">extends</span> <span class="bu">RuntimeException</span> <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> field<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> value<span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">ProfileValidationException</span><span class="op">(</span><span class="dt">final</span> <span class="bu">String</span> field<span class="op">,</span> <span class="dt">final</span> <span class="bu">String</span> value<span class="op">,</span> <span class="dt">final</span> <span class="bu">String</span> message<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">(</span><span class="bu">String</span><span class="op">.</span><span class="fu">format</span><span class="op">(</span><span class="st">&quot;Profile validation failed for field &#39;</span><span class="sc">%s</span><span class="st">&#39; with value &#39;</span><span class="sc">%s</span><span class="st">&#39;: </span><span class="sc">%s</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>              field<span class="op">,</span> value<span class="op">,</span> message<span class="op">));</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">field</span> <span class="op">=</span> field<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="testing-strategy">Testing Strategy</h1>
<h2 id="unit-testing">Unit Testing</h2>
<p>Comprehensive testing of all profile operations:</p>
<p>@Test void defaultProfile<sub>populatesFromGitConfiguration</sub>() {
// Setup Git configuration mock final UserId userId =
UserId.fromEmail("john.doe@example.com"); final UserProfile profile =
UserProfile.defaultProfile(userId);</p>
<p>assertThat(profile.getUserId()).isEqualTo(userId);
assertThat(profile.getFullName()).isNotEmpty();
assertThat(profile.getEmail()).isNotEmpty();
assertThat(profile.getCreatedAt()).isNotNull(); }</p>
<p>@Test void withFullName<sub>createsUpdatedProfile</sub>() { final
UserProfile profile = createTestProfile(); final UserProfile updated =
profile.withFullName("Jane Smith");</p>
<p>assertThat(updated.getFullName()).isEqualTo("Jane Smith");
assertThat(updated.getUpdatedAt()).isAfter(profile.getUpdatedAt());
assertThat(updated.getUserId()).isEqualTo(profile.getUserId()); }</p>
<h2 id="integration-testing">Integration Testing</h2>
<p>Testing Git configuration integration:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">gitIntegration_readsConfigurationCorrectly</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Test in environment with Git configuration</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assumeTrue</span><span class="op">(</span><span class="fu">isGitAvailable</span><span class="op">());</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> UserId userId <span class="op">=</span> UserId<span class="op">.</span><span class="fu">fromGit</span><span class="op">();</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">final</span> UserProfile profile <span class="op">=</span> UserProfile<span class="op">.</span><span class="fu">defaultProfile</span><span class="op">(</span>userId<span class="op">);</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>profile<span class="op">.</span><span class="fu">hasValidEmail</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assertThat</span><span class="op">(</span>profile<span class="op">.</span><span class="fu">hasFullName</span><span class="op">()).</span><span class="fu">isTrue</span><span class="op">();</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h1 id="performance-considerations">Performance Considerations</h1>
<h2 id="lazy-loading">Lazy Loading</h2>
<p>Expensive operations are deferred:</p>
<p>public UserProfile withAutoPopulatedAvatar() { if (hasAvatar()) {
return this; // Already has avatar }</p>
<p>// Lazy avatar generation return hasValidEmail() ?
withGravatarAvatar() : withDefaultAvatar(); }</p>
<h2 id="caching-strategy">Caching Strategy</h2>
<p>Profile data can be cached for performance:</p>
<ul>
<li>Immutable objects are cache-friendly</li>
<li>Git configuration can be cached per session</li>
<li>Avatar URLs can be cached with TTL</li>
</ul>
<h2 id="memory-efficiency">Memory Efficiency</h2>
<ul>
<li>Minimal object references</li>
<li>String interning for common values</li>
<li>No unnecessary collections or complex structures</li>
</ul>
<h1 id="future-enhancements">Future Enhancements</h1>
<h2 id="enhanced-auto-population">Enhanced Auto-Population</h2>
<ul>
<li>Integration with enterprise directories (LDAP/AD)</li>
<li>Social media profile integration</li>
<li>Avatar auto-detection from multiple sources</li>
</ul>
<h2 id="advanced-validation">Advanced Validation</h2>
<ul>
<li>Comprehensive email validation with DNS checking</li>
<li>Name format validation for internationalization</li>
<li>Profile completeness scoring with recommendations</li>
</ul>
<h2 id="privacy-features">Privacy Features</h2>
<ul>
<li>Granular privacy controls for profile fields</li>
<li>Consent management for data collection</li>
<li>GDPR compliance features</li>
</ul>
<h2 id="workflow-integration">Workflow Integration</h2>
<ul>
<li>Profile synchronization with external systems</li>
<li>Change notifications and approval workflows</li>
<li>Team profile management features</li>
</ul>
<p>The UserProfile value object provides comprehensive user profile
management while maintaining immutability, supporting intelligent
auto-population, and integrating seamlessly with ByteHot's user
management domain.</p>
</main>
<div class="footer">
    ByteHot - Revolutionary JVM Hot-Swapping | 
    <a href="https://github.com/rydnr/bytehot">GitHub</a> | 
    <a href="https://rydnr.github.io/bytehot/docs/">Documentation</a> | 
    <a href="https://rydnr.github.io/bytehot/javadocs/">API Docs</a>
</div>
</body></html>
